#!/bin/sh
#         QPM       0.1.0     11214     16909     
##############################################################################
#
# $Id: qbuild $
#
# This script is used to build QPKGs.
#
##############################################################################

IFS=" "

#---
# Default Configs
#---
QPM_QPKG_VER=""

QPM_DIR_ICONS="icon"
QPM_DIR_ARM="arm"
QPM_DIR_X86="x86"
QPM_DIR_SHARE="share"
QPM_DIR_WEB="web"
QPM_DIR_BIN="bin"
QPM_DIR_BUILD="build"

QPM_QPKG_CONFIGS="qpkg.cfg"
QPM_QPKG_SERVICE="service.sh"
QPM_QPKG_SERVICE_ID=101
QPM_QPKG_DATA="data.tar.gz"
QPM_QPKG_SCRIPT="script.sh"
QPM_QPKG_INSTALL="install.sh"
QPM_QPKG_UNINSTALL="uninstall.sh"
QPM_QPKG_WEB_CONFIG="apache-qpkg-${QPKG_NAME}.conf"
QPM_QPKG_BIN_LOG=".bin_log"
QPM_QPKG_CORE="/sbin/qpkg"
QPM_QPKG_TEMPLATE="template"

QPM_QPKG_NAME_MAX=20
QPM_QPKG_VER_MAX=10


#---
# Message
#---

# Error messages
err_msg(){
  echo "[ERROR] $1" 1>&1
  echo "[x] 任務失敗"
  rm -rf build.$$ &>/dev/null
  rm -rf tmp.$$ &>/dev/null
  exit 0
}

warn_msg(){
  echo "[WARN] $1" 1>&1
}

msg(){
  echo "$1" 1>&1
}

debug_msg(){
  #msg "$1" $DEBUG
  return 0
}

#---
# Library
#---

edit_config(){
  local field="$1"
  local value="\"$2\""
  local qpkg_cfg="${3:-$QPM_QPKG_CONFIGS}"
  if [ -n "$field" ] && [ -n "$value" ] && [ -f "$qpkg_cfg" ]; then
    local space=$(awk 'BEGIN{i=0;while(i++<'$(expr 48 - ${#field} - ${#value} - 1)')printf " "}')
    value=$(echo ${value} | sed 's/\//\\\//g')
    sed "s/${field}=[^#]*/${field}=${value}${space}/" $qpkg_cfg > $qpkg_cfg.$$
    rm -f $qpkg_cfg
    mv -f $qpkg_cfg.$$ $qpkg_cfg
  else
    return 1
  fi
}

#---
# Main
#---

# Help messages
help(){
  cat <<EOF
Usage: $(/usr/bin/basename $0) [options] [--create NAME]
Options:
  --create, -c NAME       建立一個package目錄
  -?, -h, --help          顯示操作訊息
  -V, -ver, --version     列出qbuild的版本資訊.
  -nas                    設定QNAP的NAS IP.
  ---push-key             上傳SSH公開金鑰至NAS.
EOF
  exit 0
}

# Create directory with template build environment
create_qpkg(){

  [ -n "$1" ] || err_msg "internal error: create called with no argument"
  local qpkg_name="$1"

  [ -d "$qpkg_name" ] && err_msg "$(pwd)/${qpkg_name} 已經存在"

  echo "建立 $qpkg_name 目錄..."
  mkdir -m 755 -p "${qpkg_name}" || err_msg "${qpkg_name}: 主目錄建立失敗"
  local qpm_len=$(sed -n "2s/ */ /p" ${0} | awk -F ' ' '{print $5}')
  dd if=${0} bs=${qpm_len} skip=1 | tar -xz -C ${qpkg_name} || exit 1
  mv ${qpkg_name}/${QPM_QPKG_TEMPLATE}/* ${qpkg_name}
  rm -rf ${qpkg_name}/${QPM_QPKG_TEMPLATE}

  echo "初始化 QPKG設定檔..."

  local configs_path="${qpkg_name}/${QPM_QPKG_CONFIGS}"

  edit_config "QPKG_NAME" "${qpkg_name}" "${configs_path}"
  edit_config "QPKG_DISPLAY_NAME" "${qpkg_name}" "${configs_path}"
  edit_config "QPKG_AUTHOR" "$(/usr/bin/whoami)" "${configs_path}"
  edit_config "#QPKG_DIR_ICONS" "${QPM_DIR_ICONS}" "${configs_path}"
  edit_config "#QPKG_DIR_ARM" "${QPM_DIR_ARM}" "${configs_path}"
  edit_config "#QPKG_DIR_X86" "${QPM_DIR_X86}" "${configs_path}"
  edit_config "#QPKG_DIR_WEB" "${QPM_DIR_WEB}" "${configs_path}"
  edit_config "#QPKG_DIR_BIN" "${QPM_DIR_BIN}" "${configs_path}"
  edit_config "#QPKG_DIR_SHARE" "${QPM_DIR_SHARE}" "${configs_path}"

  echo "[v] package初始化完成"
}

pad_field(){
  [ -n "$1" ] || err_msg "internal error: pad_field called with no argument"

  local field="$1"
  local field_val=
  eval "field_val=\$$field"
  local pad_len=$(expr ${2:-10} - ${#field_val})

  [ $pad_len -ge 0 ] || err_msg "the length of $field_val must be less than or equal to ${2:-10}"
  while [ $pad_len -gt 0 ]
  do
    field_val="$field_val "
    pad_len=$(expr $pad_len - 1)
  done
  eval $field=\""$field_val"\"
}

build_qpkg(){
  # Fetch configs
  msg "取得QPKG設定值..."
  source $QPM_QPKG_CONFIGS

  QPM_QPKG_VER="${QPKG_VER_MAJOR}.${QPKG_VER_MINOR}.${QPKG_VER_BUILD}"
  QPM_QPKG_VER=${QPM_QPKG_VER:-0.1.0}

  # Check
  msg "檢查編譯環境..."
  [ -n "$QPKG_AUTHOR" ] || err_msg "$QPM_QPKG_CONFIGS: QPKG_AUTHOR 必須設定值"
  [ -n "$QPKG_NAME" ] || err_msg "$QPM_QPKG_CONFIGS: QPKG_NAME 必須設定值"
  [ ${#QPKG_NAME} -gt ${QPM_QPKG_NAME_MAX} ] && err_msg "QPKG的NAME不可以超過${QPM_QPKG_NAME_MAX}個字元"
  [ ${#QPM_QPKG_VER} -gt ${QPM_QPKG_VER_MAX} ] && err_msg "QPKG的VERSION不可以超過${QPM_QPKG_VER_MAX}個字元"

  # Build
  msg "編譯QPKG..."

  rm -rf build.$$
  mkdir -m 755 -p build.$$ || err_msg "無法建立暫存目錄 ${build.$$}"
  mkdir -m 755 -p tmp.$$ || err_msg "無法建立暫存目錄 ${tmp.$$}"

  local script_len=$(sed -n "2s/ */ /p" ${0} | awk -F ' ' '{print $4}')
  local qpm_len=$(sed -n "2s/ */ /p" ${0} | awk -F ' ' '{print $5}')
  qpm_len=$(expr ${qpm_len} - ${script_len})
  dd if=${0} bs=${script_len} skip=1 | tar -xz -C tmp.$$ || exit 1


  local config_file="build.$$/${QPM_QPKG_CONFIGS}"
  cp -afp ${QPM_QPKG_CONFIGS} ${config_file} || err_msg 找不到configs檔
  printf "\n" >> ${config_file}
  cat "tmp.$$/qpm_qpkg.cfg" >> ${config_file}
  edit_config "QPM_QPKG_VER" "${QPM_QPKG_VER}" ${config_file}
  edit_config "QPKG_WEB_PATH" "$(echo ${QPKG_WEB_PATH} | sed 's/^\///g')" ${config_file}
  edit_config "QPM_QPKG_PLATFORM" "${1}" ${config_file}
  sed '/^$/d' ${config_file} > "tmp.$$/${QPM_QPKG_CONFIGS}"
  sed 's/# .*//g' "tmp.$$/${QPM_QPKG_CONFIGS}" | sed '/^#.*/d' > ${config_file}
  local data="${QPM_QPKG_CONFIGS}"

  local service_file="build.$$/${QPM_QPKG_SERVICE}"
  cat tmp.$$/qpm_service_pre.sh > ${service_file}
  printf "\n" >> ${service_file}
  cat ${QPM_QPKG_SERVICE} >> ${service_file} || err_msg 找不到service檔
  printf "\n" >> ${service_file}
  cat tmp.$$/qpm_service_post.sh >> ${service_file}
  data+=" ${QPM_QPKG_SERVICE}"

  cat tmp.$$/${QPM_QPKG_INSTALL} > "build.$$/${QPM_QPKG_INSTALL}"
  data+=" ${QPM_QPKG_INSTALL}"
  cat tmp.$$/${QPM_QPKG_UNINSTALL} > "build.$$/${QPM_QPKG_UNINSTALL}"
  data+=" ${QPM_QPKG_UNINSTALL}"

  cp -af ${QPKG_DIR_ICONS:-${QPM_DIR_ICONS}} build.$$/${QPM_DIR_ICONS} || warn_msg 找不到icon目錄
  data+=" ${QPM_DIR_ICONS}"
  cp -af ${QPKG_DIR_SHARE:-${QPM_DIR_SHARE}} build.$$/${QPM_DIR_SHARE} || warn_msg 找不到share目錄
  data+=" ${QPM_DIR_SHARE}"

  if [ "${1}" = "arm" ] || [ -z "${1}" ]; then
    cp -af ${QPKG_DIR_ARM:-${QPM_DIR_ARM}} build.$$/${QPM_DIR_ARM} || warn_msg 找不到arm目錄
    data+=" ${QPM_DIR_ARM}"
  fi
  if [ "${1}" = "x86" ] || [ -z "${1}" ]; then
    cp -af ${QPKG_DIR_X86:-${QPM_DIR_X86}} build.$$/${QPM_DIR_X86} || warn_msg 找不到x86目錄
    data+=" ${QPM_DIR_X86}"
  fi

  tar -zcpf "tmp.$$/${QPM_QPKG_DATA}" -C "build.$$" ${data}
  rm -rf build.$$

  mkdir -m 755 -p ${QPM_DIR_BUILD} || err_msg "無法建立編譯目錄"

  if [ -n "${1}" ]; then
    local qpkg_file_name=${QPKG_FILE:-${QPKG_NAME}_${QPM_QPKG_VER}_${1}.qpkg}
  else
    local qpkg_file_name=${QPKG_FILE:-${QPKG_NAME}_${QPM_QPKG_VER}.qpkg}
  fi
  local qpkg_file_path=${QPM_DIR_BUILD}/${qpkg_file_name}
  rm -f "${qpkg_file_path}"
  touch "${qpkg_file_path}" || err_msg "建立package失敗 ${qpkg_file_path}"

  printf "\n" >> tmp.$$/${QPM_QPKG_SCRIPT}
  local script_len=$(ls -l tmp.$$/${QPM_QPKG_SCRIPT} | awk '{ print $5 }')
  sed "s/EXTRACT_SCRIPT_LEN=000/EXTRACT_SCRIPT_LEN=${script_len}/" tmp.$$/$QPM_QPKG_SCRIPT > ${qpkg_file_path}

  #dd if=tmp.$$/$QPM_QPKG_DATA of="${QPM_QPKG_BUILD}/${qpkg_file_path}"
  cat tmp.$$/$QPM_QPKG_DATA >> ${qpkg_file_path}

  rm -rf tmp.$$

  ######
  # [MODEL(10)|RESERVED(40])|FW_VERSION(10)|NAME(20)|VERSION(10)|FLAG(10)]
  local enc_space=$(awk 'BEGIN{i=0;while(i++<60)printf " "}')
  local enc_flag="QNAPQPKG  "
  local enc_qpkg_name="${QPKG_NAME}$(awk 'BEGIN{i=0;while(i++<'$(expr 20 - ${#QPKG_NAME})')printf " "}')"
  local enc_qpkg_ver="${QPM_QPKG_VER}$(awk 'BEGIN{i=0;while(i++<'$(expr 10 - ${#QPM_QPKG_VER})')printf " "}')"
  printf "${enc_space}${enc_qpkg_name}${enc_qpkg_ver}${enc_flag}" >> ${qpkg_file_path}
  ######

  [ -z "${avg_no_version}" ] && edit_config "QPKG_VER_BUILD" "$(expr ${QPKG_VER_BUILD} + 1)"

  echo "建立${qpkg_file_path}..."

  if [ -x "${QPM_QPKG_CORE}" ]; then
    echo "認證QPKG..."
    ${QPM_QPKG_CORE} --encrypt ${qpkg_file_path}
  else
    echo "傳送至${avg_host}認證QPKG..."
    local nas_qpkg="/share/Public/${qpkg_file_name}"
    scp ${qpkg_file_path} "admin@${avg_host}:${nas_qpkg}"
    ssh admin@${avg_host} "${QPM_QPKG_CORE} --encrypt ${nas_qpkg}" >/dev/null
    scp "admin@${avg_host}:${nas_qpkg}" ${qpkg_file_path}
    ssh admin@${avg_host} "rm -f ${nas_qpkg}" >/dev/null
  fi

  echo "[v] package編譯完成"
}

# Main
main(){
  while  [ $# -gt 0 ]
  do
    case $(echo "$1" | awk -F"=" '{ print $1 }') in
    --help|-h|-\?)  avg_help=TRUE ;;
    --version|-ver|-V) avg_version=TRUE ;;
    --create|-c) avg_qpkg_name="$2"
        [ -n "$avg_qpkg_name" ] || err_msg "--create, -c: 沒有package名稱"
        shift
        ;;
    -n|--nas) avg_host=$(echo "$1" | sed 's/^-[^=]*=//g') ;;
    --push-key) avg_push_key=TRUE ;;
    -nv|--no-version) avg_no_version=TRUE ;;
    -ps|--platform-split) avg_platform_split=TRUE ;;
    -p|--platform) avg_platform=$(echo "$1" | sed 's/^-[^=]*=//g') ;;
    esac
    shift
  done

  [ -n "${avg_version}" ] && version
  [ -n "${avg_help}" ] && help

  if [ -n "$avg_qpkg_name" ]; then
    [ ${#avg_qpkg_name} -gt ${QPM_QPKG_NAME_MAX} ] && err_msg "QPKG的NAME不可以超過${QPM_QPKG_NAME_MAX}個字元"
    create_qpkg "$avg_qpkg_name"
  elif [ -n "$avg_push_key" ]; then
    local id_rsa_client="$HOME/.ssh/id_rsa.pub"
    local id_rsa_server="\$HOME/.ssh/id_rsa_$(/usr/bin/whoami).pub"
    if [ ! -e "${id_rsa_client}" ]; then
      echo "系統將為您建立公開金鑰，請依照步驟按下[ENTER]鍵"
      sleep 3
      ssh-keygen -t rsa
    fi
    while [ -z "$avg_host" ]; do
      printf "請輸入要配置的NAS IP:"
      read avg_host
      echo "連線至${avg_host}..."
      ping -c 1 ${avg_host} &> /dev/null
      if [ $? -ne 0 ]; then
        avg_host=""
        printf "IP有誤，"
      fi
    done
    scp "${id_rsa_client}" "admin@${avg_host}:${id_rsa_server}"
    ssh "admin@${avg_host}" "cat ${id_rsa_server} >> .ssh/authorized_keys"
  else
    if [ ! -x "${QPM_QPKG_CORE}" ] && [ -z "$avg_host" ]; then
      while [ -z "$avg_host" ]; do
        printf "請輸入用來編譯的NAS IP:"
        read avg_host
        echo "檢測${avg_host}..."
        ping -c 1 ${avg_host} &> /dev/null
        if [ $? -ne 0 ]; then
          avg_host=""
          printf "IP有誤，"
        fi
      done
      echo "提醒您，可使用[--nas]參數輸入NAS IP"
    fi
    if [ -n "${avg_platform_split}" ]; then
      no_version=avg_no_version
      avg_no_version=TRUE
      build_qpkg "x86" # 2>/dev/null
      build_qpkg "arm" # 2>/dev/null
      [ -z "${no_version}" ] && edit_config "QPKG_VER_BUILD" "$(expr ${QPKG_VER_BUILD} + 1)"
    elif [ -n "${avg_platform}" ]; then
      if [ "${avg_platform}" != "x86" ] && [ "${avg_platform}" != "arm" ]; then
        err_msg "目前platform只支援x86或arm兩種"
      fi
      build_qpkg "${avg_platform}" # 2>/dev/null
    else
      build_qpkg # 2>/dev/null
    fi
  fi
}

main "$@"
exit 1
#qpm#
 ~sR <{:3mB{xzӐ]HR =tY-`m)˒mi=~_h$KB0ˏ{J.{o1{;,ͽ݃);_H$yZ>Ý.`"<~)޸b0vՓnsn\v{f:qO3yO?V!F><$9!NEf̬koJx!-
 O>خO3R(*+q>!1;dJrTI>IULPO$R8Bs<N0}gFd_֪v5Hq{ěOÀmcq:rǦƻ`hˊN8Vfp2^eR,8
 	QxELIꏕ-mD\&TP&Q A:Up)3p3矽T#?f0
Gq1wQ? F>M&&3p.ՀКEW}
WAN]^ԷB^Ug֛,nRx8kndu Q·m(>4YiYS*wz?ioy_:fB8pjM8c^N`>@r7Q;u!Eڭ@V.ѱNU7OivQX4HKQ#V$4t"jN\0=Ƭm}Q>Y0`UcoVwn4cp{$
 t&){Xݞ9V3V^tYe5.Dț8Q"T	8|hr 9Vܺ-RO5,\ZƦ{u|yխ:j_a-ک`dO`UՋƉp9}V[՚P>,yqQ5|v-.I]k4:X{Nq)ܛsc
:j0^wH-y#%[8Xp#,#eQ|ґ.	U/_h^IBw'$GPử('|zF6΁8-:uǎC0פ:O5:9@fcs/zhX~UeÑ*>n1QfC輬錜8Vh":?]V*ڻQ!;k?'
	zHj{T]w^u[%|#nӳ+ח)J]w0PR?йnCV$J>ۧG%UtQFъqKTTɒ9;9'f.WJݾC]רU̒ZOXaL@P$E:>9@,2Qj~>MPuS)yS^]\H`+F[cƷ|؁x0	3H83Gk<w;l~\n ,㱾)#}ZW|'SR@jt	\AxYD ,
>FT@;rF8JtgŻr]d 2\w,,08=J.JA$$ʣT	OdWT
y˄a5Ou<2bzSීd&F.e!r [/g[)=5v>=nNvK$l<2spQ[e>-cנKv,`go;?$|O{{;{}s'fU*#@;Du!#?fL굙L
#\v(0G)I§!uc23s1(A?PBȟx̘"PcD82`s/XLnx'Ҙ18 5wբmAa9,TjWmIwߣfr	Is}(s&!
)No)FωqtB0,16Qh.}KJR<k{S'==7eɦ2
6%:Pq*ɪk.jAmϊ$1"wWί PEޡĜٚ?L gw5vvpwowgcZAZ}]o@uJ-keIN4a&NIh3߄9&rtTofϞb]+M1V^$j=CdA(sFwk;[}Wۙ~V&X䋒q(8?`Gj1Nr|\>˜Lt[1/N6M6N21پ8 Q3ߢ8M@z-O>oBA*H!n>XN$&iW,^fLLÂ궯2BPO]sh	Sz*\N,Y_{3%ov*3G|>52@P,E^Ւ3PYnm+Fup%GT윱f;m]Ntb|j>5	0֍7!`D7AkTyϛڒ|w:tH夔d|a1taB9L8rMf<nȝ̂.[>ɇ%ALPL<?A5t/sNKd+|GV%15ܘǏ
Kؖ	<6R#H2T^!F#KUwcpP@؎	Nu$Je&6$Ȉ=|O»cP|*HF|mDG,Val7(=.ATtDT߼g`{+7۹f|k6:
|[AX[JnE$ЩǣOWA-{G(µ/=#cF[?lHdf6vDMrtX1  ll&n|Nܣ_q$/bzl ne-!AFwTxY4P	;_wr.ҵYtE!DY,L"6PgG-ƍ|tgH̝ 4cb%٣ CPraƗU!ʺmlE$MO$\x_ޣ߱_OԯMr]&;Brym4Č3*7[!:[sG_'RʤbUwM9!1CY3,d}U?f33pd]LěK$`>E׈Kty3bOko.
\=,G:c{;nvrKOdWu\ͣUb߯m̄?Li,S8*(t`3$!};^rWv]jM\u	͟Pm2*EUNGI.ݧnz*rUz./çp<C+&'T*xL)h,ԗ{%ȓ{bzmsvݺ!'s
nE1~>lD3 CM(]ZT
,\<4FAKre}VԘB~3ȖOrbJ+N?MI7*'qҠ<K)NSjjoRD)-*DbIUMǟXJE%#4*SJ+0ACynNR`#b=dZZy<R^DԳ׶3`4
8rmQI 3+&7gxzgY	*[(R1(#;sȭbHuB@H]Ёz1v?z{?a׊5*k1ztY~Q+-G1r}s+U8R(kĆJBŵwFdq,w(*gYv?j7;L*#>k>nR=z	y=%4熼unIEYMOryD\IDGъJ{Q䮣e)HJ%,0s vk;9-Pε8ݞWb(!!:	SkwT`jkT`o.AQh}g:%BΔ6i+YiM&b<߉7jl[6ǡWV夷	ܗ'T kq,u2<0<W_rs,''v!RN>u83ֻ~Jߛ'[4H.=,e,MmK('$oť8 o.-ƓC1
MtX
uK쳈%MкٽY93lr冶$՝?r|	!1?9W\b R	1e|teUE@S飍`5ٝVJ0@>޳ҽ$|?]	{@<h\K"I'$8U/U+`V?W)3{BvOM,mPHX/1ecm*kM?l:y\N4l
ca ^ Q!2$G4dDqzE$HC Q>I($Gר-]AAJ^Hң6VPIh.<9Tg"~K;Eۼ
:5rfMXYe8ر,uYBQGZ;@'T#j7
=;=ɤ>DR	RF+Y2Bii0 e-Ip  tсx&=H~V%kmv>p^;7kQn6 _lXux?%`uJc-kXRݍ(9?+qL#Ȇ'\-d{ߔ>]0e\k63H0h/`/ѴXi}_񉬲z<
0r5[paY<V1ĹPva;ykQţgL)}4}SDXJ_e:*՟O5 &QfD8Ԍ,%2hV-p gҶl=LHQt%DKoUMd~GeIs2Lxh
SY2:Q&RfnORͦnSS󙢉rLTh&Zc¦hZ1$Elv{dqj41`!K1(&=Z邱~
U47ϾưyQVڸ{&)@~c46~YQ	">Wz5GU-fzNt9gi	Kr$2Rh$	
?W˲s*D= A&t=ݟ0]_Jd[ˊ̰(?2x	'Iy|~(]MT?	#,uLH&pB^glͳy6<glͳy6<glͳy6{5 x  
#qpm#
 ~sR XU!APpK@C@@DZEnR	.	)iTܙޙ;s~;Yw~w͂y@_%7	f&/A\Nv0; @\a~<+77l~;y4Kb<~Kp[J9Xi7'o?	9.v. gg?^ DB$  `bRRi.@9A<\P)oUWWL~!`0fs7 32D@ȗzfv`΅L . {Y_/\f}kLpx_-erS';W70xx	]_CUOC붛#&n֦ꎎvlݬ ݗ}.8Aܾ(((]T2&>~N,$gqK
w~#t8lV  Jm@,KW{Z tTAN,y.r1|iAK/?pw͟EpY#hl?RB/e7	<w)~})Az)Ie<Kp)/%]J&/oZˏe/t))Ào/0`/ &!xւ΃ "pQL9.RB/e7	{O&.aKvnOoc] 9999/Odkjfi;9 qq\?7G@}HEYNt~r}݅zHQTAR
)ٚXYbV
US#~6]Wri)MIU#JBT5h%2b9QPUPPKLCV^e*2q9S]HZ-{_t~^!yYqIEVbgA˱˥Q˅KwQQQZPTѐU=f r1TDm\}R1qeѭ<xҀy6fja;I-I1#eQu!*-r-SQ'!TWRUI=-DnojlHHɩ+)*+_?t)繭sѫsV7<ɞyn~qU'WιͿ;K
zrqrv73[K+0c\LɈ/Հw^R/_)B1Yɘwwpecfj{y <~\ܰƁDEs~{q@.ōA 5uQUu$#* ؎NYI:X8۷$HV<y_<Wttu{Mj췟 K7._&{igD4djq8:Z2g廄~njb'omϏ\~?տ'/D.Xd=nW=?Y@!` ~e ף?s0|? Xpp1 ~<`FÀ0`?0`1 _``?.ƂiK?x	c=,L[k89ٹ ܐ<lid?:gQ.mL 럟忄c/t=/=7E >ܥ>[\ & ȃԥx؈'0`?6l|7緾a_xm0`_ˀ]l:9Yk^qsv?'Ƿ?0';EG7PFy.
Df.N&nn.6n=ӯ(s͸8_#JI KVƱ?4xl45<H.q ީKQC|<o=ca
qzWb^JUb"rͣaob6$п11XrsJΨSnU΂d-؄O)7C\\?7(Jz~0de$.z-q d%D=_y9xwxl6dhVE>ު؎QⓂS'*ꅱa&#(5W#qqfq?m~~vJSk^|'U_?ŷr*pȣT~{J&~]IƱirDDϕ`z]ʣ-k}'A=P d^$сÛLdEZq%<.;Iri
׹;:A!&6>w൮DWR1Tp/)TڭHi͜GDjT+L/p=}]Wrt̿zA-)}!+8QQ
F$xVVu3gޞcx	)O}_c9WlC` ˋΘ~]~]G櫔QiJP92p3(Ð`aH6z!CALNA-CG>.wC+hsUuXiLKtzkbʈvq#qk#[BM)K_P*O5mcF;Z3qX\eL3`Y GM㻋UMU|>3V/kxo+Hx:e3zVxZռH10Tp1U	.KGĻ%5j8[aT=Ř\Nrkw$G;^rc(.c7e-dZ & ڨ[-m\E.6oXX%kq/kuω۴(Tt-r<;[K'KD`ϞGRֿp1v2S:|?$80je`Z_c'j@o˜L-Ffլz؏zUfi*:F)PE3XX3kӾo	}2agܞ0ԸF9F\˪bO2`',UXX度sUl6vLcg󢫏JB4d4YUZHn#MbLǃ52QjJrߌVr,
1Ydwl-6e3D,CD)<'v,(%㹝$9EM	DuƥTkm2ě h:)zQФT_vd9qqP*#C^墏Bxϩ3pc	>I*+;#D7x<y->ќH`fܖ\a)<nu"^nUR_ne(((v7QZ:orPޜ)]ؽwiwJ'^͂D*C7%7dFqu !7(Ջ!8k>iB+Pu28\hiv,*m*3IUbBg8].1u+e.>6,sI ,+78[,ơ)6QşXKіr_R(gjq"xŞĨ+ GGiDN^ZDϜy*1:Pt x1(?Adqu͂Zܾ*-ύYcQu;Ywu|ÅJ_>ϭy*\~ u+Vx[49b("!{X*_8	@%Nm1vC&yM]%nD1Lhd) ۤXrK\ay%{iOMʴci@}*Ge|*9u5f){${" &rLR\ \8q5J_D[?hrġ)Rǘ/BFh]PKw
~S?址4$B<TzpߢQfXRdƉA=Hz':=	fW@N!?! }@;nZX ^j\~yspa	\|'F h *z_2+㾏5Mb2m5&]>!bE -BT@HAeA2ԒMܰ<ޙrχj2)H]W	XJ_]PtGIHK=̀=,XtRАA	nPG
HӀ(4+L!S''(,Mt&Jewd3nĳuL|1O֪)nS9-|+S49M%R0WILɭ=}$XlzO`nk:7ð	xg]@_:
k>|E2{ꅟ#i>u7\fE>T	q[.8y;|]}Z(.宅ɴǘX'?Z/'ܢwTCޮçhg=q&Z;g
uiU:la:1.eYM~ۂOb;6*Uڃz/ ]wp(.Zk0V Jm1+wrN G)/}BAQv6$*ƧL_ŪHQk
qvq`F[KA2b'_wג
je2̉$RR::w55*5[-]KϠ؅!SO)@Dpﰼ2Q5[:KdzSVQo݂fn4pѽn19Ǫ>= ysk/0vW3>$;M.}<^IWazptU |c4jsXr{ZV{wڍȗxϥ* Fv\E-P2$6V8j׏v$yzv<QュtZ|.,M33O)7H-ءzʱS
%ň]y -;ms&[/}][,s0ߖ"$6g{wkPPlF;{<O(]]W=f8THYPt%y!LZb$A@~g|^'\Vװڗ&=])Q`5_V^Wr%S7;u϶	,[9m,VULg)׺qYjL(u8[.yh(I``]>j|1-w0314D	r'+@ jgx{gKRPUb=L|}VX]o ;n~*fss;w=맗Jp:BEoǾ U!ަ̠$N"^$w   u?<X`(65[pZzow^eFw(\>*Ki	|V}y,U3Bl+1MJw^vx2I *1p (Baufq|Wa'[S3(5FĞ(c)ajW# ]י_|! p1?wQbhw|NnVYG1$}i}'OYG}ۨwtX%j"A|}Kg0Ct}Y_TP!CuS<T(vd89S?,F. e&Fu2\~J)roowH]xH`xx"/(Pc{myBEx\`Np8]vu?5~
PeQ?R\"	Bj
7_GEΓ5[!1x`$D.2!WaD6UAYF }FV_3.ۊbbn0Vit'E^޼A@i(-fҝg=URzAoBZVZy	>!7c[˽YūLJs2I鞨7KǣCF3w%p^5#WHOK~/E  N挻7@2 ͂nId@:"%gN'6I\GKy5<0'B}
'hնDT Ғ^)7Ɉb=k|裥N*ݞF3v'-IDxc|5ʧx;ôx]mkdP;ǹRIhlaj!~>Ve0Fl?C@B!X-ybڙN5x;B'bNQ8^k)ZhE#Dqп7xV#k!O~m׊loCYv=ߍ/iF@^;1ҟTˏx ]Ĳk̳%ynz9.O-'_vz,=_4'*([rƚ-4ULmR>F}gRn~Ompٿv1JE[ F~k_Jawc͑rvTmhj Qpl֒JJ߃,vQmWPsBXK^41hyٸ2hwKAVE'F񗓱ϖ]/qFڽbK vpZ C; U<Bmrҟ'=#/ٓnDgd+qޥ 1$(_d~
e5Eg-'tX?q*X-KAޣ)4`T|(=g(̳+S
p{1܄|Ь^FZv"IS1:tɀĆ,/|D`V\@NwYՌ}I8lQvR/DmL3BtcɏmSUuSՆDeha"@Dn`BMz]-/+lw&	"8>sgn6,}ɱ(M0 >9VVP?Jӗ@ەsH$OК,n9C,W13D>22NOs|U,h6×OF1t5$-\$]@Jf'y;rYxF!abxJj̅R_;WJ4Y65ޛ)qyM(f3/{^57431t5/۲a1CqЮ(1 D64=M.%A)aE4.BQr ԀtsDiJQOT4<a1hO@"}Rۉc IFĕW1kx'ٻɄ赛[ZusQ~k?~eB[GtB=yPkaTL' h	b[>"$[E߫khhTkYTͼĤ/O7o5z1ڜȰ9E
MF
_)W֚.aӱƌhQXeq,VbZUx\5߯R=+_3/Qp\F%R~a')X%8U,Tjj7h^!'-^kj6aNX|hQ1'e7Ts=KϧӇU_,ȻU?ģ@Jeo#dQ܋QEK*ˎqH~\E.Nyvpn^«o44rON.Cc*Z1͋еպdEd\f`ho# jt|!fG1+R0+iAuSg+6t\"H?&#:,;@/7\'0,2/<Ӿ}Ώ*'=^ie5uSydbZwhX5/#Wߝ15V}64#r3SDZ*hO6jSX׶Qg1ҏ	ڛڳKE5Y$]}{GFT͢uK-,JNVлww`"[Q# 4"gAP`TqDz9Sѳ%HҾh+D]\D-=м]Z#dkn.Npfҭr$TeD||Sa=Z*b^Yʴ'1hχĝ'P5me9L͓_0I|!S'M(p;"ъ̨;af۠ߵ|(Hep${
gdE{^*7\Cfh=#gV$9ӓHZfu? SV&Q$d*t轊M	x*xd8jDfFuPSj Xc2'
x/>Wg|Hyfƚ'Oe*'-d[O
٢ؘ$Z')oS]W차EXb5JaHTM4'&H;ckGObJ{ )p@ERq@)ޔ;s\_:2f\M
a{tH;f)p<EO
*+*438R 7Ncy3v+[X+!(DEr`CV"G1#t`^1}Vuf'uzj$Y-u9EtmV;.!Lk]\1/B?3I[eCB>e/?
!LFrZabJ"mBg_3>vW1I$-,T̊eo	EO1[ҁi_6:Y\ot?*@0`O 'mR+lQ[łnd19ؗ.ZpP3o(q&i<@u$	ь'"2.
͋|
~K;A􌏶rdn=Y"hB
{nI\CS$4CENz-65&F먏nz/kuvNWFkcO2r!{^j+
]kq3f|҅9;kE~R
P8x#P#::wnxұ:J()R2xUx>ZggEy>EDz8Jv[[J3'c2hԝW_ AcPs8(ʳsUAuQt^QmS270BzW4GtywiN'6[>Z)%~XТRL"'`'lyoL³J6Y|-EJU&cI#n%C2#>IpXhm ;^heXAP7>IѨ}[Yك\ղ]y.) !swEfOب8	EɣY\[\@RHOi-<9$4O*V{};L5Pxvt@`LY$AT?THc 2Kca7R*0mדlP>=Uy/G|*0k;gABޠ?W}S²kH!ֹJuH5P:yڞ3`Jel&^!$ZZX\xR)o]<ЖiVVv՜*iCVLՄѸ5A4s:+YA2M&2UJ0o4r9yPC8lDlz06(ΟJ؁8sв:qEz-ՎVH2yӊZs8gpZm
M7+s
G#ؕ[3f-U5>=mt1"pKr}f_=?{ĭ<D]@(j{7Ai2Xdx&YKZk^Ͷdg$g4hu[+DQfӎi:Elе%"mQe)7[VC%84s,wrv(6}ЮKVšCL-|S̱%5`	zfZp"ɐ/\GgLQeGouVvj 6:=X!=?XN*VC?`.ۉ!{Q3'E֯xaBt	ߨٲN4[ry|B	P0y^ySbԦ#M[ZUk9a'9MDoYR	{Hw9}(!Q"\m?i.~aԩx2cYcH-ِQ''ҕxVѭ6chBhO~> ?rxw:/jNTU)&X{{_f}"ȭ.k7k(a1G}XlժLKteJ\0fk+i}Bweߑɔ{/ϼ=lY&63Nz.s74&>xPk
H~mpݫR]*T?2d# 1)%hn[dlbٓt'GɜDi%\J0,,$1*X$yiwUD)ՌJ)%OptkθlqhyiJ4Nfɻnh	dJf$'}wpub&!JһIWϻk+p@B^F	 U\`	kPyr]|LJ6cȟ	EmMPmpDruz^ -EB'^iNeN qf=av(i|]DFZ&Y6"/A>#1%5ęrZk}&#VL|TB{J*@lf])A)%כ>%܋#>0Hpvvo,$^+"xФLveú-#c	(TjxeHDw~wq15]Eve{q2M]ЊPrJ^] 4-	{+E,sTBZԵpRrpґ7;"=G]C3L_c_[oSEF8G6wI@4L=c(*5<R 3ϠߗEY[puz>%\(<mDO@=?bha-Jh/vן?ߍfC`bVE3~ ;?bЋěvRi΢Cڸ]2(1[Ngdy5#Zn\b}`HM`ݳ|:*=[tU	1Mc5Cơ̆C,{9Z#
&,LIe5XN3oy<?7|Cm\q~SM[p!-I	d喛TEʏHpQژڑ)ʾʗMUHˋy˩be58 WVLnxsN_<d&Xy:וA>ׁTl804p9$9*Yh QtLk(+fCw\|D>X&"Uˎ\ɏ9ORITV8F|uM{+1PnpNgەk"7IL;H*54taE٣<?3g^$$%ki%i~]$ysTJ9iduafo4R&QW	IubX=y򅖹X׎"fovBjoy,ynZu<W{ .O]
/cJ|eXLQD\Rƅ8e%d3ly{L9Gle:l|-xBP+vFH\NG5ma1BOG!Zac9lܶ^W͚S4h.Hem@L]?Whj|^$Du'$=1rٗ!͊́w33dF^Ú)qf|Rx]4xE<2fZ,]SceVǔq")ioc3X\s
ŗ1z7_<Yrj@,D2v!zESYu*$QDLYIݤyxkVen7_I!b0x49\ՋNJuW[3{Elb>:-\Z=hhktuImsrM"~d~F#/:7D)Av@5>gOi<1(nVN$ ȧGyOp׃px͘Z]1D41d(\D(y(Qɣ]rdd![钽hE;2:ݖiXI$* }dΧ<ECL ݬ0jܥXXëٱ\V1 `EDecܢY06ƵQ,Dl.Tp7jɃHL}MvN$p}aNAYCEԌ]TyjUp}"qy@CmUkx'Zٴf 3E4GYG"=vjy0)uO<#
=:. #r_ͫה[T,S1/ך%&mwsbwˑ $IWSܨYfK*E8hCd48ST>= l$YNaa*ゼӈEA 	pw'CG`LU*lRSLReU=2IjƝjk Mq@pfᕇP]7WX q@"lƔi-.W_ZmHA5iii3/=򈒢j #)rGʥun1s^9T	J
W=sjox!`I!vڨbEw*y/Ggy\U"NO(؏x	|\ja
Fiӑrpq$B#p}}>;UѯޣJv_ц
}xDY{PZJ$!+R|sQs1Zn/G7)dZ$.xɨ!p2A/&ͬBJɾ[oH&g"IDXrVk 6<$#8$PG<rMkJu	ʳc;:VmgPzc.EM/OR3Noﰟ28<:"rH3r&J*a_2ɿǜ<Y,5^Nr4YꞋ)f.vOv2Kq&NtQ0΁9kv۸ِv}vS͈#~J2yfzAru^wߝdIu{8n.dd3+f_+P>!cu BHO{%&G^)81ggҖdNU}W[A#NV;Oʢp^-ԗpˬBqcZuFI;`YÖkcO7׬vh,vq`bmvKp=S`QJ2BGW,O(O{rFr^4nPa7Bsg rz)Kf}h On0v8oV)u[ڈI vkW8
-Q质+Qφxg2g퇟wCOIUߗ~4/CxjqPRoO屺(&[ ^4\_ *C$ȍq#{i3Tɽe7SG
=*^=YsӪm~"k,0`;4a   
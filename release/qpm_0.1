#!/bin/sh
#         QPM       0.1.0     10059     15596     
##############################################################################
#
# $Id: qbuild $
#
# This script is used to build QPKGs.
#
##############################################################################

IFS=" "

#---
# Default Configs
#---
QPM_QPKG_VER=""

QPM_DIR_ICONS="icon"
QPM_DIR_ARM="arm"
QPM_DIR_X86="x86"
QPM_DIR_SHARE="share"
QPM_DIR_WEB="web"
QPM_DIR_BIN="bin"
QPM_DIR_BUILD="build"

QPM_QPKG_CONFIGS="qpkg.cfg"
QPM_QPKG_SERVICE="service.sh"
QPM_QPKG_SERVICE_ID=101
QPM_QPKG_DATA="data.tar.gz"
QPM_QPKG_SCRIPT="script.sh"
QPM_QPKG_INSTALL="install.sh"
QPM_QPKG_UNINSTALL="uninstall.sh"
QPM_QPKG_WEB_CONFIG="apache-qpkg-${QPKG_NAME}.conf"
QPM_QPKG_BIN_LOG=".bin_log"
QPM_QPKG_CORE="/sbin/qpkg"
QPM_QPKG_TEMPLATE="template"

QPM_QPKG_NAME_MAX=20
QPM_QPKG_VER_MAX=10


#---
# Message
#---

# Error messages
err_msg(){
  echo "[ERROR] $1" 1>&1
  echo "[x] 任務失敗"
  rm -rf build.$$ &>/dev/null
  rm -rf tmp.$$ &>/dev/null
  exit 0
}

warn_msg(){
  echo "[WARN] $1" 1>&1
}

msg(){
  echo "$1" 1>&1
}

debug_msg(){
  #msg "$1" $DEBUG
  return 0
}

#---
# Library
#---

edit_config(){
  local field="$1"
  local value="$2"
  local qpkg_cfg="${3:-$QPM_QPKG_CONFIGS}"
  if [ -n "$field" ] && [ -n "$value" ] && [ -f "$qpkg_cfg" ]; then
    local space=$(awk 'BEGIN{i=0;while(i++<'$(expr 48 - ${#field} - ${#value} - 1)')printf " "}')
    value=$(echo ${value} | sed 's/\//\\\//g')
    sed "s/${field}=[^#]*/${field}=${value}${space}/" $qpkg_cfg > $qpkg_cfg.$$
    rm -f $qpkg_cfg
    mv -f $qpkg_cfg.$$ $qpkg_cfg
  else
    return 1
  fi
}

#---
# Main
#---

# Help messages
help(){
  cat <<EOF
Usage: $(/usr/bin/basename $0) [options] [--create NAME]
Options:
  --create, -c NAME       建立一個package目錄
  -?, -h, --help          顯示操作訊息
  -V, -ver, --version     列出qbuild的版本資訊.
  -nas                    設定QNAP的NAS IP.
  ---push-key             上傳SSH公開金鑰至NAS.
EOF
  exit 0
}

# Create directory with template build environment
create_qpkg(){

  [ -n "$1" ] || err_msg "internal error: create called with no argument"
  local qpkg_name="$1"

  [ -d "$qpkg_name" ] && err_msg "$(pwd)/${qpkg_name} 已經存在"

  echo "建立 $qpkg_name 目錄..."
  mkdir -m 755 -p "${qpkg_name}" || err_msg "${qpkg_name}: 主目錄建立失敗"
  local qpm_len=$(sed -n "2s/ */ /p" ${0} | awk -F ' ' '{print $5}')
  dd if=${0} bs=${qpm_len} skip=1 | tar -xz -C ${qpkg_name} || exit 1
  mv ${qpkg_name}/${QPM_QPKG_TEMPLATE}/* ${qpkg_name}
  rm -rf ${qpkg_name}/${QPM_QPKG_TEMPLATE}

  echo "初始化 QPKG設定檔..."

  local configs_path="${qpkg_name}/${QPM_QPKG_CONFIGS}"

  edit_config "QPKG_NAME" \"${qpkg_name}\" ${configs_path}
  edit_config "QPKG_DISPLAY_NAME" \"${qpkg_name}\" ${configs_path}
  edit_config "QPKG_AUTHOR" \"$(/usr/bin/whoami)\" ${configs_path}
  edit_config "#QPKG_DIR_ICONS" \"${QPM_DIR_ICONS}\" ${configs_path}
  edit_config "#QPKG_DIR_ARM" \"${QPM_DIR_ARM}\" ${configs_path}
  edit_config "#QPKG_DIR_X86" \"${QPM_DIR_X86}\" ${configs_path}
  edit_config "#QPKG_DIR_WEB" \"${QPM_DIR_WEB}\" ${configs_path}
  edit_config "#QPKG_DIR_BIN" \"${QPM_DIR_BIN}\" ${configs_path}
  edit_config "#QPKG_DIR_SHARE" \"${QPM_DIR_SHARE}\" ${configs_path}

  echo "[v] package初始化完成"
}

pad_field(){
  [ -n "$1" ] || err_msg "internal error: pad_field called with no argument"

  local field="$1"
  local field_val=
  eval "field_val=\$$field"
  local pad_len=$(expr ${2:-10} - ${#field_val})

  [ $pad_len -ge 0 ] || err_msg "the length of $field_val must be less than or equal to ${2:-10}"
  while [ $pad_len -gt 0 ]
  do
    field_val="$field_val "
    pad_len=$(expr $pad_len - 1)
  done
  eval $field=\""$field_val"\"
}

build_qpkg(){
  # Fetch configs
  msg "取得QPKG設定值..."
  source $QPM_QPKG_CONFIGS

  QPM_QPKG_VER="${QPKG_VER_MAJOR}.${QPKG_VER_MINOR}.${QPKG_VER_BUILD}"
  QPM_QPKG_VER=${QPM_QPKG_VER:-0.1.0}

  # Check
  msg "檢查編譯環境..."
  [ -n "$QPKG_AUTHOR" ] || err_msg "$QPM_QPKG_CONFIGS: QPKG_AUTHOR 必須設定值"
  [ -n "$QPKG_NAME" ] || err_msg "$QPM_QPKG_CONFIGS: QPKG_NAME 必須設定值"
  [ ${#QPKG_NAME} -gt ${QPM_QPKG_NAME_MAX} ] && err_msg "QPKG的NAME不可以超過${QPM_QPKG_NAME_MAX}個字元"
  [ ${#QPM_QPKG_VER} -gt ${QPM_QPKG_VER_MAX} ] && err_msg "QPKG的VERSION不可以超過${QPM_QPKG_VER_MAX}個字元"

  # Build
  msg "編譯QPKG..."

  rm -rf build.$$
  mkdir -m 755 -p build.$$ || err_msg "無法建立暫存目錄 ${build.$$}"
  mkdir -m 755 -p tmp.$$ || err_msg "無法建立暫存目錄 ${tmp.$$}"

  local script_len=$(sed -n "2s/ */ /p" ${0} | awk -F ' ' '{print $4}')
  local qpm_len=$(sed -n "2s/ */ /p" ${0} | awk -F ' ' '{print $5}')
  qpm_len=$(expr ${qpm_len} - ${script_len})
  dd if=${0} bs=${script_len} skip=1 | tar -xz -C tmp.$$ || exit 1

  local config_file="build.$$/${QPM_QPKG_CONFIGS}"
  cp -afp ${QPM_QPKG_CONFIGS} ${config_file} || err_msg 找不到configs檔
  echo "\n" >> ${config_file}
  cat "tmp.$$/qpm_qpkg.cfg" >> ${config_file}
  edit_config "QPM_QPKG_VER" \"${QPM_QPKG_VER}\" ${config_file}
  sed '/^$/d' ${config_file} > "tmp.$$/${QPM_QPKG_CONFIGS}"
  sed 's/# .*//g' "tmp.$$/${QPM_QPKG_CONFIGS}" > ${config_file}

  local service_file="build.$$/${QPM_QPKG_SERVICE}"
  cat tmp.$$/qpm_service_start.sh > ${service_file}
  echo "\n" >> ${service_file}
  cat ${QPM_QPKG_SERVICE} >> ${service_file} || err_msg 找不到service檔
  echo "\n" >> ${service_file}
  cat tmp.$$/qpm_service_end.sh >> ${service_file}
  sed '/^$/d' ${service_file} > "tmp.$$/${QPM_QPKG_SERVICE}"
  sed 's/# .*//g' "tmp.$$/${QPM_QPKG_SERVICE}" > ${service_file}

  cp -af ${QPKG_DIR_ICONS:-${QPM_DIR_ICONS}} build.$$/${QPM_DIR_ICONS} || warn_msg 找不到icon目錄
  cp -af ${QPKG_DIR_ARM:-${QPM_DIR_ARM}} build.$$/${QPM_DIR_ARM} || warn_msg 找不到icon目錄
  cp -af ${QPKG_DIR_X86:-${QPM_DIR_X86}} build.$$/${QPM_DIR_X86} || warn_msg 找不到x86目錄
  cp -af ${QPKG_DIR_SHARE:-${QPM_DIR_SHARE}} build.$$/${QPM_DIR_SHARE} || warn_msg 找不到shared目錄

  cat tmp.$$/${QPM_QPKG_INSTALL} > "build.$$/${QPM_QPKG_INSTALL}"
  cat tmp.$$/${QPM_QPKG_UNINSTALL} > "build.$$/${QPM_QPKG_UNINSTALL}"

  tar -zcpf "tmp.$$/${QPM_QPKG_DATA}" -C "build.$$" ${QPM_QPKG_SERVICE} ${QPM_DIR_ICONS} ${QPM_DIR_ARM} ${QPM_DIR_X86} ${QPM_DIR_SHARE} ${QPM_QPKG_INSTALL} ${QPM_QPKG_UNINSTALL} ${QPM_QPKG_CONFIGS}
  rm -rf build.$$

  mkdir -m 755 -p ${QPM_DIR_BUILD} || err_msg "無法建立編譯目錄"

  local qpkg_file_name=${QPKG_FILE:-${QPKG_NAME}_${QPM_QPKG_VER}.qpkg}
  local qpkg_file_path=${QPM_DIR_BUILD}/${qpkg_file_name}
  rm -f "${qpkg_file_path}"
  touch "${qpkg_file_path}" || err_msg "建立package失敗 ${qpkg_file_path}"

  echo "\n#qpm#" >> tmp.$$/${QPM_QPKG_SCRIPT}
  local script_len=$(ls -l tmp.$$/${QPM_QPKG_SCRIPT} | awk '{ print $5 }')
  sed "s/EXTRACT_SCRIPT_LEN=000/EXTRACT_SCRIPT_LEN=${script_len}/" tmp.$$/$QPM_QPKG_SCRIPT > ${qpkg_file_path}

  #dd if=tmp.$$/$QPM_QPKG_DATA of="${QPM_QPKG_BUILD}/${qpkg_file_path}"
  cat tmp.$$/$QPM_QPKG_DATA >> ${qpkg_file_path}

  rm -rf tmp.$$

  ######
  # [MODEL(10)|RESERVED(40])|FW_VERSION(10)|NAME(20)|VERSION(10)|FLAG(10)]
  local enc_space=$(awk 'BEGIN{i=0;while(i++<60)printf " "}')
  local enc_flag="QNAPQPKG  "
  local enc_qpkg_name="${QPKG_NAME}$(awk 'BEGIN{i=0;while(i++<'$(expr 20 - ${#QPKG_NAME})')printf " "}')"
  local enc_qpkg_ver="${QPM_QPKG_VER}$(awk 'BEGIN{i=0;while(i++<'$(expr 10 - ${#QPM_QPKG_VER})')printf " "}')"
  printf "${enc_space}${enc_qpkg_name}${enc_qpkg_ver}${enc_flag}" >> ${qpkg_file_path}
  ######

  edit_config "QPKG_VER_BUILD" $(expr ${QPKG_VER_BUILD} + 1)

  echo "建立${qpkg_file_path}..."

  if [ -x "${QPM_QPKG_CORE}" ]; then
    echo "認證QPKG..."
    ${QPM_QPKG_CORE} --encrypt ${qpkg_file_path}
  else
    echo "傳送至${avg_host}認證QPKG..."
    local nas_qpkg="/share/Public/${qpkg_file_name}"
    scp ${qpkg_file_path} "admin@${avg_host}:${nas_qpkg}"
    ssh admin@${avg_host} "${QPM_QPKG_CORE} --encrypt ${nas_qpkg}" >/dev/null
    scp "admin@${avg_host}:${nas_qpkg}" ${qpkg_file_path}
  fi

  echo "[v] package編譯完成"
}

# Main
main(){
  while  [ $# -gt 0 ]
  do
    case $(echo "$1" | awk -F"=" '{ print $1 }') in
    --help|-h|-\?)  avg_help=TRUE ;;
    --version|-ver|-V) avg_version=TRUE ;;
    --create|-c) avg_qpkg_name="$2"
        [ -n "$avg_qpkg_name" ] || err_msg "--create, -c: 沒有package名稱"
        shift
        ;;
    --nas) avg_host=$(echo "$1" | sed 's/--nas=//g') ;;
    --push-key) avg_push_key=TRUE ;;
    esac
    shift
  done

  [ -n "$avg_version" ] && version
  [ -n "$avg_help" ] && help

  if [ -n "$avg_qpkg_name" ]; then
    [ ${#avg_qpkg_name} -gt ${QPM_QPKG_NAME_MAX} ] && err_msg "QPKG的NAME不可以超過${QPM_QPKG_NAME_MAX}個字元"

    create_qpkg "$avg_qpkg_name"
  elif [ -n "$avg_push_key" ]; then
    local id_rsa_client="$HOME/.ssh/id_rsa.pub"
    local id_rsa_server="\$HOME/.ssh/id_rsa_$(/usr/bin/whoami).pub"
    if [ ! -e "${id_rsa_client}" ]; then
      echo "系統將為您建立公開金鑰，請依照步驟按下[ENTER]鍵"
      sleep 3
      ssh-keygen -t rsa
    fi
    while [ -z "$avg_host" ]; do
      printf "請輸入要配置的NAS IP:"
      read avg_host
      echo "連線至${avg_host}..."
      ping -c 1 ${avg_host} &> /dev/null
      if [ $? -ne 0 ]; then
        avg_host=""
        printf "IP有誤，"
      fi
    done
    scp "${id_rsa_client}" "admin@${avg_host}:${id_rsa_server}"
    ssh "admin@${avg_host}" "cat ${id_rsa_server} >> .ssh/authorized_keys"
  else
    if [ ! -x "${QPM_QPKG_CORE}" ] && [ -z "$avg_host" ]; then
      while [ -z "$avg_host" ]; do
        printf "請輸入用來編譯的NAS IP:"
        read avg_host
        echo "檢測${avg_host}..."
        ping -c 1 ${avg_host} &> /dev/null
        if [ $? -ne 0 ]; then
          avg_host=""
          printf "IP有誤，"
        fi
      done
      echo "提醒您，可使用[--nas]參數輸入NAS IP"
    fi
    build_qpkg # 2>/dev/null
  fi
}

main "$@"
exit 1
#qpm#
  R <wڸ3mB|4I_r/$4
d۽M/
i7fe6loE=h4K`ӷ+RSR=rX6Y.̓=,w'R<ɲpg l8\CȿGʣ733{h`	yݬ|Ff7B`0̉QŗjjRޠ8E@N8[/&813Nׯ5:^]sZ8Qq1YCtO;vQoV@ԌI~NqJҶ;dJ!	*$Q|pPx$O?M2]2Ӏ!\euGT[D]E 9ƴ?%yNuZʰ|̧?@ȅpM&O~Y ~iG<Btjlb;Cwmɜ^7`y<n?Uk^^jr<lQzӔWEݜW\IKNVy*VY|@2Yç͚ l{gPM,`N]
W!+tyV׬^
^YS߽S{?XNy+X΢M}dsn];plQ+PսqGvxSy6``V5uuRyU+݂ȹZӺLOQy9*x,7&O41bG$
%>ݾm+Fvw~kpj5Y}d\x;bn߸coǋ.BCѝ-FVHiQ *h6zJsfh]x7UPk}jΛ;2ՋƩ^LkFjMJx׸Ur9YSv-.iSk4ϻXxS7ƐTX;(Qߊx8!pK	MæWkz`Wzi=I<{GQ*|ՑEVD鏳Ug1tTiF}Q`>>S w?k^^r1XcY}gM5f;jlhݗ5ݱ3ĚMXDvc ;dptDa00AiTBkM>zUW۠kNa;Zh>=;(ZhB{ݾLfP肼+ c:
WwU$LhWQMe]Q-bj5*mqvfNlΉLQ\t]a~V1KfTb`\F8" V< H7]ij,BU+L{qLyue/q%Vl`DM?
΂ &a'XGu&6hMy%y < ]w$?#F4{#c!(ҟ RJ(
*MqdUp⡮;g5BH6QHÆdH4h	A&dn`[`U{]"pkH T,	LԻrh I<*BC3 L  $3L6Y3BX@v^;Rz~;S>yrE_<-<s;9NΈ*^t`uj#o
'/ͧ<?<(=}2*JSozɌ5Lf`".A:rT{Aj$|[w2!3Isz%Vߙzҹ f3Dm420!Ծ1:fX18 5wΊ>ߩaKæUjOB5/փHHMԢqSE;;qA[Tɿb
zNliҡ<F4 
&.{m@xfN&%;dӘ6%:Т}Ͻ/s/XD Q$s
֊.BGY<|ApV8x[!sQth]XTox?0_ypypkGjS-ȅ@_i-ٮ_IՋ7 :HF B;x({	۲'*¶$ݙ|*L#zFhA9H~  mB}C@!Y1!ĵ> j*i'Z#!
zg3RLG]!ȴ|oa3Me'`$#QIc6,d׺iN5slzjb[dkM%;C3" 
ϧV}a!_4I>HR(k%gy$:k$dXIU]jYkLOv}C龈to`]7κX̣|>z\(̯-*[6\+ve\FysAlZW7A#6s	Nm431ƺ<p1LXꢆ%D|(7A/<$* C:oHda1!aB9 ~
^lhi&M3I^x#svsNo}#u{%_יB	$?x|-%!l	a*zZ5Z|Z>7Iaܘn̓_
Kؗ	+R#hH2Tޔ!F#@U7a':vu
ILl6I{41>{g 2@U*-	[-JTܢD*tfQ{=sR}MglCloEwGvux}84GA-{GÈCu7o{o:||ddrT"'G&9>*s^I%n|N_q$N*.4	=%C?#;cNdD|w4NP)oNgMir+}W׹_,]EIXBulbaOteSM]v3vrlV1*>XA< *D]CvK&;<C:1I1	1g(w)k\Y^G*1PE#5DXgcDJT@~a)'s0nh(kj;I6ZП `*lflixwaĵ,'cI.oγ\TT*9DsKw`.Yϫg:Dލl=J-'i:jD6fBKwlR8*(t^3$!:^r:WN]jK\m	͟Pm2*Egѕ(AGݧnz*r;:yC'?zD8	s+&.TƯ*xL)hýQ=S164xlBGxߡ!#Q"ǿ!C](CzT,\<4>Kr>e}`IXҴB~3ȎO1Ϧ2b{,PC)A1T8gsq`]$7hlObI3CQ"<#`=ٯϘFselzvF_TNMS#kϐ̭8h0'&s[X=-J -)FqQDUDNCGad2
)!uJʁ:){VleXcgc/Zi5e͌c{+6 !F.~ثPqݘ){׉0p]Od7K(ye22ڌq&CYmSZA󡬽qn[똑TT!'3ͮgA n4|tIEQ3'V0s-V;$Ɲ۱X߱iYşR=+h֞[
#ӑ ;&pxJCT7	RsE݄L)1M{K v#gD,;wմm9qW%5ou(7k	ФAVqI*>6!׽bVNZ)YM:ň]DV$J)q>BΗdس	l[6i-_?лl=zy[(,2g[ۮImΪKwE	)Vs4e׌fLjIjT7>I
H85<ΎެscJJ%ĸ'[W9wN%mN$_6N[Nΐ@zI4
sЋ+G ?+KR<*hӕPIk' ֺ*.ƅ.>tBSPJC|2#nԜҶ@Ƌ5ʨ#^u9֧*౼GD'ʞ,C`va"̷rt.Nstx]X|M~&	e;@ՃHTyRGlm"\yDP:tڕ7gtiT6bl"d. Ī^=zU&gk~dʺ>eG֡KI`bw`QP%#2PvLy_gznu/ro)YY	b"E#hx9LՂ9SIG1Gg0~Z=}/)A4ϕ4g_F |n P0'OdÕuXiKNq%N+?-~1vN+va-2uFb)X|$ȳQT98,!F~тB0<EnHLچcYcbt	&D |~齪I|FeDyy\ZhCTx.C<p9L4/h+}0DsTdILR]8"SE[qKLoDs\+1{B֩`lJJtwGrߖEͷSS8(_Q}a[7!'<dԪakTt_K׮oǜ*5#ʭ̶qCO:ZYuFN=I lCp$λHS+!K)lyT~q%MAsL IXR_{$P4E͈f2+I	O|B}1)tߖmٖmٖmٖmٖmٖmٖmٖmٖmٖmٖmٖmٖmٖ]I x  
#qpm#
  R XTIְ	s&Inr 9%'9$,9(ArFI*A$'	$33v:Vso:U7{';76_}$agsA8\ 0 qu	wW7<߰q|,-I/oj*fbgqܜ}ssB 5? 	  (@ڠK.':OU/~ʁ4?'!0A !&P=+e.90`Ow& /X}.3Ͼ5'`p8}>y|NMl\Q <$dddt}-sG1GwsW=5kG5sSn&nb&._(Y^n;:ڝo_ֲ1w6&3 v_f`qss `w!P
ʨx;t 0k_-5;G+kXX[kZ
8o[_YkQN">.gy»?9oaȟڿ8	pw͟Ewdl5`?RB/e7	w)~})Az)Ie>Kp)/%]J&//Zˇe't)!Ào/0`/ &!ׂΓ C2ŭs^Х^ʀoC 0~4?L\9 >ܰ?/:hsrsrps_??֊/(ws@\<<_`0,# ,': XX~z񕑢@R615 -ŬV}3 !,/Gl`5b%~%-7SF
7TS#jJdrz~.x+1Yyj\LZ|> t9"i}{ٗe%ZZYt٣-F,F-f/5EEEjAURECV܂HXRq9Y/HƅMbKJRPf:?T,'=[$ŌEe~ɵ,LEVFR]IU'eG7ߪ!!&l$|{jӥG*j΍.gG>Yyܰ'{F筣Yt96/,*gKŉl5F/UF$¤6/s0&#&WyKUo&	d%cb6O_G喍^\.nG@Mfjjjfj98@ƀzw Q		:HT\]	TS@ knGϬ[y\,lREYU$x^j+:&5HG[Ag/PRS2+]!djq^8:Z1G廂~Qnjb'om\<?~?'/.?<<\|*߻c?Woa(~e ׳Ѕl_W ,8O X Lr0`3a?l0~0{no=À㿘y ?``..eK?x]{XGW;y	|?|K?_I>`8q5W/?w:=/=ob uoo<Opop ~R6a3`ƿl0~0{no=À㿘۰?0`5furz?'Ƿ"~ 矁̤귭),'2sg5wqt2ud5qss1uwp=~G-kmVJX2eO-g|	AJuy4=|ŧݘF < N]*gyk+˄PhzWm~;tUA ՌQYǒSvFrèru'k&UJ{+aD4*[EBry ޓU4|d-ېi[E{
Ob;;DO
Odxf
XkԀ^;G!VVN20a)OfzT}ʩ!R.LFll^>)9|v%iǖe=WZ:uS&*Я[@ك+xIBKt7	>xDJo29zkŕx4&˥I+\
L.ۿ/xzt׺bC_IĀRJ$ÉcTRi2"5sQ$2ulFO̚u^1t>jqއFE["+%9;[X_ϜIz{	:#'<!~l=>\3{ MCC$//:cuuqRF+CM@͠3C:<_.!"5~F1k;xg53VUKhci3)/ѥR3+#Ņǡc4&fn	5=hHk/"~C!^~{{K2h?2Bhcq!u2Jj2π	f5x5IO.V5Uz{SXE245>@L3#YiVjB#HpP}]Ti&,}u4.k4Ԕ~qlQ}cGp~p9q֫iDziVޔibZ4x3kzl;s}baZ殭ƽoj='nڢP߶xl.,U>{JB[Lxt}i~e-s2U	b?Wasæ|)@Ϡ;(wc]bϴ*>BOؾ%yf3vbʐr{O(P6q-=% Tq`a>U}/v1Ɏ&ҟ͋>+	!H>FHgVj!arR7	gH1!BnF2T)3[bof+dݱؔxLAЧc dUvT5%i*R5oA4DAR}ڑCwSs8{>
=%`$"2+uXdDs#exOGp[rqXՉ,tx1	\WIv|MThځDIjx
VkM`7:i^@{stugc=Qޕ+-:V{5&"#d@lȇܠT/ʆ7Q	CRp1Z	p$Uw	xwRfd%Go4FFUb-E[jC}9J3KMŉ{zBD\n 9yIkq۞?s@`{Š$勓5jq6'W4<7fQڎEdvjyBHY1
(~</pAI>ͣ[X㉦~o昋PS`TazT~@$ xv:B`S5wSs<2-49H4nb)-q~nK./=n`6)tq骸ԝטh[ ^0=Kqp(nAluMH:c-oDuA:C.1!*NcMw/АnPc~FcI!'RΪRV U\$䛝^9@jGp<4 =t}k1byvz]Vfsi·%p6D/ D}˜OÏ>X7}JʴyXtė>@(CTQ" !#SKk7q{gU?Iʤ iw!D&G_%tZd+h`y*y+|
*KwAw$5@ /0`cbICC^%C).#"{OШ#&0L(45ڛd(9ޑ`֑2,#<YbOa,N4H _%Y>Ҏϳ2%*,<x!|{`}>a<&LO!Mw1|(Ts Z^L~^JۏI6VrYg,RE'md/w!*k!c
$:cc<hϿܞrQ7,K
S{F_\jaoJ,8J+}&uRTPHn6g5mbTs$>=@pp|^ت:Tbh뽀h^ vS؆ۢ̇̃zj]g[(Ŭ:	qEtې<2j2#E*ǑGm4Ƒkm-i^l  ~a]K*E^ڇ'ˤ3'lHJqD֨o}ta^.=6bL=cG>VFg
؊Dwlnc.9M)ZDuO}kDǻR zHs` ;ϹRY3\^t4xi']6U-{9Ѱc2kY:i7"_~Q>F p-	p@eʐ Zဪ^?ڑxeTG:k
*;7<, 0k"bwwyS*&zSL*L#Ftjw9LG^͙Dovlb{Gq|[Dp؜ݭfCAvC?Ϣ(vum^[BḛR!eAQztӕ
0yϗC cKxj5m-OnxBs)[]j_t٦Dא[yA^ݖO4=2$lAYXTm/2iD\ey<1D%6l坣$I9~vŤB06ЂLqR'ȝlET,IjVBUq\2Ybv94;5C[ؚͽ^~(Pٚ$V> Tx3;xmcfSv:B>b=
lQieRyQVk ݡput,!%Y釧q(Vr06*ݽzɰ+'<O@1rc&s]ooNx{:] v]gB;v.iܗE3?O;ޝm"81YfepxQ'(VF?fi:ISo^bн.c$f8M.s4%RG>.ٻK@щ"ugI/|RA	#JN\RؑQ<xλL T-pg$+b=?p"Bsj-C v"v!Ճ>joOIT>/$C9'-M?us79iptj})@F>tJ:_p7$
)?|M4Q:OlǬCぁPۺȄD^!tTeUYͲ_ZQO̸n+
ěXҝ}x?c{Zj|UV qSԧXIw2	,VI%3Y#jZk7$܌m-fnж3)${h,ihiΖÁ"x*^Q#=-!o[LG8AGWo3`\o4Oɀ4N7$}눢,+;&&Ab[s-FgTvR81pJP*6:,?URQj`PQHKz=D$#D򡏖:!8t{~͔۝'vF27B\u!(<wivo@v2vNZJ4V&
X1Si^__D2*?R4Zmro()!+	tc)kg:D
EJ9uzF`{#k$bAq7Y?6C>?u_+rjglB|7~[sg_HrO4ow{"H>S-?tBPq3غ<U~]ȃ~ \ ҟKӫln)LL</kDNT1jIa:BJ?wfa+,n m)#ꛇ[5GQe-zdGqK±ZK_*ҳ*}cE]kCa	c-yYԣyeʠ]-ǢkZ_N>[LOwMfaj./iϻ3 0 & T-PeI􌨿4rJgOQ#x'@W/ǐ_|I)H}cP᫐.c,g2{ЀQYM0ϮL)/\zƤnpA2Vx#jۉ|s'%OUCxtN&5Yq9ARgEV3%B`GH62 
Y|I%?rNUOipVT.# .?IJ	5uDn56'h 3?BLS&ǒ\4`|X[;bBV(M_mW"!Kr$?uBk.m7_Ș|:=]UE_>x-ԒPOhrMvY^*IL2Oe]dX+/3J}v|\E+dxo+dĭq7|+yh/̔c^]Լl˞ŰھALS4^xh4,!иDz
Gɉ>S~ͭ)9G!>]P.PLWhŠ;!
#>XJ5rn'N'MW._ǬAdn'VnniͱF^}r/>m9Ӎ
2=CQR	0pB7%<w>n|Gco}BRbfQ5<Xd`Xsê֤rlxt{ks"ZU*TS7)|]Zk
`,2PowM3F)aUKǱX-!j&joTAHzrit~J4~q~Fa#44rH񇝤HcF4WPe]ܠyz;<xڄA;_`EŘl
/hlO@RO5h{/=r#LVY"REL"JTeh*ԒFq/֖G{t'-n/;!]rò^ k8:M=y	;API<};Wjǈ6/B^Ty-p-~%l өSsZBE,.HK)ÌFMNP'q ` c8sJt㫳pʼ8Ns:?>@ȖBz"\LAf摉iޡC`}Լ\}w/ZǐN[p$cML->k==NNa^FeK?F'ho.k.(+k[f!CO>ʇ[tMc5ｷMR5 .d+9[A> nE; ӈA7CR		  y{HLE* AJ&Rۏ+tr#+GhBnvMjAлDw :e8beH|RKqM};n4tkye)*ӂ:h8أ=B4w@\qCD2A6O~&mu<zN4Ap'P4F+^2V쐆n~H ]wx)j)-{pmpwEY6NO*#ii܎2Li[kD4*6!&p %z2d~jIeJ]dBBcK0N`wɜ*8w\RJ#k"s>MLʒm	?q*dbclRk8:`ldMu]â	cc==@* QJ`7sҜ (Ů=qV*#Bm!q77znO(JRdA> zSNr}ȘsQ7)uW;!)>),HL;QanbQDRɁYOk;xYw4U>MzYuw8S[yВ8fםѵ[=7H3Q~2vrN0:X( $mnm	D(|2iރ6v[hx(	%}_>ߛμ^QP$dPE3+-%@=AlIU~qLhf^cKrU$p3<
Hy¼=IqsxI6F1np`_:hBrhSϼ]7^7ٚA וJ$0SG3`(#4/")1.U3>dMSH	)駺&ip	5N}joN"9Qjn'7טu>ƣGki7J"9U_|jM>*6WDMx +tQg؛'yJ<K)#CHC!l4,T߹owH(HVh	yi(I"mn*ϜX4!jʘ=Rw^}qmcAii>*NUՉN@>cDyEOQVf&K
	^	@YSPkޥ9gDH\oQ?'Kkyr{aAJ1+jp4PZLwS~0Ϯ+5dETrF*QT%mCˌ$	bfq:&>tzݢn`eA$\'a~f<D"DuoeeZrqV:jv@pg~|1'߅=ap8s'%f;Fsrafos~x0H!fD<9PL8>YLf[[y2*@=3e]u2{SR#@S,wJkȷ^O6)B|T潠-4WH<-\	z\IssL	˶">X*խ"\@BYi{
(5*M,xA8HkiaqunI?ui@[uXJXwWs"m[o@KJvGZ1VGPm7@(dSjhK4}w<xRTE+7ȹtAO/J6yi,ؠ82+=c|"B0BudTtT;b[!b@ XxN+bha1Ýk1+Z6z`|Hܬ)eB>{0.3cWnl!|LԞg<Ə܊1/Y}:6I4SX>t- i	Sl`՛d-iiy5ے[)
וoq2@hFM;HrK\Yx1@זx|SFF/aN0lݯZT:k#XR|̡١aC.Y"1uk̶N1ǖ{%tښiP$CXqջ-u0G	?/YYUi蜃`pXb9LZM~zJY˻n'"uF-P@Z
-'|f:/n1+%LB=y扻3vO>ҋQ4niVF[	M4UKsd-JźB&Fl yԿ<CG.DqQɌ[dɳZM"u6dCF57#7ПjHW>[Gڌ		~t?=e n鼨n;QUTX~D#қ(R"b:	;|^ڊD B?2D2{"ݬ`	aE.V2-YЅrRnx~+EKKcsTW,c9~G&bLL^'Sz<Dܳsd8I7qtGW:twCݤÛBz+ 	Rt*_pKata#Pؓ-zjTȗmgO*s9w%sitp) ؆ds`1haeߑGWɓT3F\>+e$$t<-ѭ9d7ˢuQ+_8&λ!k'[9dT'8+Չ5қ(I[']=xt9
y]%gTq%CvO1+8_];8 '44SHh25}FC=5yq33 	I
b{A}C;76w ihf:q{xǙhڡiw5kdڠyVĔ4gʡwWoGh횯-[1Q	oe~*"[ uET4
4zח^oP+p/wN ٭ڽ{xphVA2Ͳە"|%(SkdSk#Ut-jԦV}&#4RwmC+B5s?+=;{uVs4XҴ$DXQ	gkuZԧSI1KGހ##@!w3~=}]lMa%2-X.HUN<:_g=oYc%֭pUTU=4OB`*b8(ן3!??X~c&иd^loI9r/iv.Hڢxl98ߎ fhs˫/"=?"4kucLRn	kmTE&HƬ63I4w֎h(jCW:0ݓ_jr')Y8cK;h0wy0j:@OY4nÁƧlDڷ$&[nS){kf+?"UEicjG+*_6V!-/-Q~(?_\Y)2q8}^T`u[/\W2\\RIv@[Tå搘,dWD1;!DX|-TrAtb-t,WE,;rK[6&?v?I}'QYPQFxס6iMh@#hU8ulWً$n20j"xԬ0HKg|^{Μ#xĒXvFȫɧ=
4uvV8j{Q+䤩թaLGK]F]/'&Չ	bcXZc];ʊ=<V_k!i^훊<w)|)}.a1E	B?r]J%_F5-2|$i	mJ@"}p!;aGlQ>`hsz^5kN[O #1=w?w^RyQ`-`Pӓl;jg_4+2&Ǝɏyk)Iuqd㑖:5ogiSvM}Y/Sǉ͏lcq}l(_,1|Bdbʁ.؅lMA fݫD1qfQBl'uY9|1$dTkÄ.j|pU/V;)q?\9S\mYI  pM0j"M%P]7RJoN4S=˦!ĠBY;\ jY#?i^JUe6crjt.,0TxHpY6F2Ȣ'w݆:. ʭvl%ާKv% t[O`%umB@C9"202hwg=pbCbf`CsY1tP"qfÈ&"D<vٻHR)5j&"16U;͒݆Ic:QfmUS3vqSQKSUݫUaT:o<HjeӚloeeيLFylbe=), +4DΏH}5_SnyRLLϾ_kZbyfϩs-GC'a_Mans6f'X.$ьLaSi?\,H&P>g;4N#Au.$<ݝy1!ThnIeLM72I1@T`$w4]mqWBiw\YȶbQ2Vh\ܲQ:FS_}|UjAt!k<xͼp#Jak"+.:׹/̩zP%^+)\̩`7g%iE/xAlK.qU:OԊ:=4okc?%dFq)Q
̦MGFq]`y0VTEz*ٕzz.0fG*eէCh)Q>KE;hﺹݐ槐j%v7p4B+$m!pr)$:c%Zއ{+GxcOBtk5)d%*
9,L[C	DC鍹pn!T6p>I8=~F\8H˩"a_ٚ8xjCT*~ʘr&sVd]6x;Hf^{.5>=ɸ6.ř8E-8R(٣o6gCA=8L{<\7##*t;)Ж%?AT[IuR{}wa2$=VZdH͔a~ܯ'CSGց!-?하d{1S|<d:t^.ƜI[9I^DVACG\Wn89[4<90(*RyAJKS_6jB/Ǎ=j%ﴂe>{2#=\NBءzn.^ز<ءǁ%Ͷٽ/LE)uXl2ٶ^aK >ģ<yѸAmctH͝}~n,bCN_<e$aW[i!llyk#~B$-P.2pftۭ^(f~FӢG=ɜU~=%W}_Ѡ#-mAJ=Vpohzd|sY~m" 7Ҳms(CeB÷gLP%rǗXfN)3TzIdWdO9`	0`0 Lad   
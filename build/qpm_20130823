#!/bin/sh
#         QPM       0.1.0     11077     16686     
##############################################################################
#
# $Id: qbuild $
#
# This script is used to build QPKGs.
#
##############################################################################

IFS=" "

#---
# Default Configs
#---
QPM_QPKG_VER=""

QPM_DIR_ICONS="icon"
QPM_DIR_ARM="arm"
QPM_DIR_X86="x86"
QPM_DIR_SHARE="share"
QPM_DIR_WEB="web"
QPM_DIR_BIN="bin"
QPM_DIR_BUILD="build"

QPM_QPKG_CONFIGS="qpkg.cfg"
QPM_QPKG_SERVICE="service.sh"
QPM_QPKG_SERVICE_ID=101
QPM_QPKG_DATA="data.tar.gz"
QPM_QPKG_SCRIPT="script.sh"
QPM_QPKG_INSTALL="install.sh"
QPM_QPKG_UNINSTALL="uninstall.sh"
QPM_QPKG_WEB_CONFIG="apache-qpkg-${QPKG_NAME}.conf"
QPM_QPKG_BIN_LOG=".bin_log"
QPM_QPKG_CORE="/sbin/qpkg"
QPM_QPKG_TEMPLATE="template"

QPM_QPKG_NAME_MAX=20
QPM_QPKG_VER_MAX=10


#---
# Message
#---

# Error messages
err_msg(){
  echo "[ERROR] $1" 1>&1
  echo "[x] 任務失敗"
  rm -rf build.$$ &>/dev/null
  rm -rf tmp.$$ &>/dev/null
  exit 0
}

warn_msg(){
  echo "[WARN] $1" 1>&1
}

msg(){
  echo "$1" 1>&1
}

debug_msg(){
  #msg "$1" $DEBUG
  return 0
}

#---
# Library
#---

edit_config(){
  local field="$1"
  local value="$2"
  local qpkg_cfg="${3:-$QPM_QPKG_CONFIGS}"
  if [ -n "$field" ] && [ -n "$value" ] && [ -f "$qpkg_cfg" ]; then
    local space=$(awk 'BEGIN{i=0;while(i++<'$(expr 48 - ${#field} - ${#value} - 1)')printf " "}')
    value=$(echo ${value} | sed 's/\//\\\//g')
    sed "s/${field}=[^#]*/${field}=${value}${space}/" $qpkg_cfg > $qpkg_cfg.$$
    rm -f $qpkg_cfg
    mv -f $qpkg_cfg.$$ $qpkg_cfg
  else
    return 1
  fi
}

#---
# Main
#---

# Help messages
help(){
  cat <<EOF
Usage: $(/usr/bin/basename $0) [options] [--create NAME]
Options:
  --create, -c NAME       建立一個package目錄
  -?, -h, --help          顯示操作訊息
  -V, -ver, --version     列出qbuild的版本資訊.
  -nas                    設定QNAP的NAS IP.
  ---push-key             上傳SSH公開金鑰至NAS.
EOF
  exit 0
}

# Create directory with template build environment
create_qpkg(){

  [ -n "$1" ] || err_msg "internal error: create called with no argument"
  local qpkg_name="$1"

  [ -d "$qpkg_name" ] && err_msg "$(pwd)/${qpkg_name} 已經存在"

  echo "建立 $qpkg_name 目錄..."
  mkdir -m 755 -p "${qpkg_name}" || err_msg "${qpkg_name}: 主目錄建立失敗"
  local qpm_len=$(sed -n "2s/ */ /p" ${0} | awk -F ' ' '{print $5}')
  dd if=${0} bs=${qpm_len} skip=1 | tar -xz -C ${qpkg_name} || exit 1
  mv ${qpkg_name}/${QPM_QPKG_TEMPLATE}/* ${qpkg_name}
  rm -rf ${qpkg_name}/${QPM_QPKG_TEMPLATE}

  echo "初始化 QPKG設定檔..."

  local configs_path="${qpkg_name}/${QPM_QPKG_CONFIGS}"

  edit_config "QPKG_NAME" \"${qpkg_name}\" ${configs_path}
  edit_config "QPKG_DISPLAY_NAME" \"${qpkg_name}\" ${configs_path}
  edit_config "QPKG_AUTHOR" \"$(/usr/bin/whoami)\" ${configs_path}
  edit_config "#QPKG_DIR_ICONS" \"${QPM_DIR_ICONS}\" ${configs_path}
  edit_config "#QPKG_DIR_ARM" \"${QPM_DIR_ARM}\" ${configs_path}
  edit_config "#QPKG_DIR_X86" \"${QPM_DIR_X86}\" ${configs_path}
  edit_config "#QPKG_DIR_WEB" \"${QPM_DIR_WEB}\" ${configs_path}
  edit_config "#QPKG_DIR_BIN" \"${QPM_DIR_BIN}\" ${configs_path}
  edit_config "#QPKG_DIR_SHARE" \"${QPM_DIR_SHARE}\" ${configs_path}

  echo "[v] package初始化完成"
}

pad_field(){
  [ -n "$1" ] || err_msg "internal error: pad_field called with no argument"

  local field="$1"
  local field_val=
  eval "field_val=\$$field"
  local pad_len=$(expr ${2:-10} - ${#field_val})

  [ $pad_len -ge 0 ] || err_msg "the length of $field_val must be less than or equal to ${2:-10}"
  while [ $pad_len -gt 0 ]
  do
    field_val="$field_val "
    pad_len=$(expr $pad_len - 1)
  done
  eval $field=\""$field_val"\"
}

build_qpkg(){
  # Fetch configs
  msg "取得QPKG設定值..."
  source $QPM_QPKG_CONFIGS

  QPM_QPKG_VER="${QPKG_VER_MAJOR}.${QPKG_VER_MINOR}.${QPKG_VER_BUILD}"
  QPM_QPKG_VER=${QPM_QPKG_VER:-0.1.0}

  # Check
  msg "檢查編譯環境..."
  [ -n "$QPKG_AUTHOR" ] || err_msg "$QPM_QPKG_CONFIGS: QPKG_AUTHOR 必須設定值"
  [ -n "$QPKG_NAME" ] || err_msg "$QPM_QPKG_CONFIGS: QPKG_NAME 必須設定值"
  [ ${#QPKG_NAME} -gt ${QPM_QPKG_NAME_MAX} ] && err_msg "QPKG的NAME不可以超過${QPM_QPKG_NAME_MAX}個字元"
  [ ${#QPM_QPKG_VER} -gt ${QPM_QPKG_VER_MAX} ] && err_msg "QPKG的VERSION不可以超過${QPM_QPKG_VER_MAX}個字元"

  # Build
  msg "編譯QPKG..."

  rm -rf build.$$
  mkdir -m 755 -p build.$$ || err_msg "無法建立暫存目錄 ${build.$$}"
  mkdir -m 755 -p tmp.$$ || err_msg "無法建立暫存目錄 ${tmp.$$}"

  local script_len=$(sed -n "2s/ */ /p" ${0} | awk -F ' ' '{print $4}')
  local qpm_len=$(sed -n "2s/ */ /p" ${0} | awk -F ' ' '{print $5}')
  qpm_len=$(expr ${qpm_len} - ${script_len})
  dd if=${0} bs=${script_len} skip=1 | tar -xz -C tmp.$$ || exit 1


  local config_file="build.$$/${QPM_QPKG_CONFIGS}"
  cp -afp ${QPM_QPKG_CONFIGS} ${config_file} || err_msg 找不到configs檔
  echo "\n" >> ${config_file}
  cat "tmp.$$/qpm_qpkg.cfg" >> ${config_file}
  edit_config "QPM_QPKG_VER" \"${QPM_QPKG_VER}\" ${config_file}
  edit_config "QPKG_WEB_PATH" \"$(echo ${QPKG_WEB_PATH} | sed 's/^\///g')\" ${config_file}
  edit_config "QPM_QPKG_PLATFORM" \"${1}\" ${config_file}
  sed '/^$/d' ${config_file} > "tmp.$$/${QPM_QPKG_CONFIGS}"
  sed 's/# .*//g' "tmp.$$/${QPM_QPKG_CONFIGS}" | sed 's/^#.*//g' > ${config_file}
  local data="${QPM_QPKG_CONFIGS}"

  local service_file="build.$$/${QPM_QPKG_SERVICE}"
  cat tmp.$$/qpm_service_start.sh > ${service_file}
  echo "\n" >> ${service_file}
  cat ${QPM_QPKG_SERVICE} >> ${service_file} || err_msg 找不到service檔
  echo "\n" >> ${service_file}
  cat tmp.$$/qpm_service_end.sh >> ${service_file}
  data+=" ${QPM_QPKG_SERVICE}"

  cat tmp.$$/${QPM_QPKG_INSTALL} > "build.$$/${QPM_QPKG_INSTALL}"
  data+=" ${QPM_QPKG_INSTALL}"
  cat tmp.$$/${QPM_QPKG_UNINSTALL} > "build.$$/${QPM_QPKG_UNINSTALL}"
  data+=" ${QPM_QPKG_UNINSTALL}"

  cp -af ${QPKG_DIR_ICONS:-${QPM_DIR_ICONS}} build.$$/${QPM_DIR_ICONS} || warn_msg 找不到icon目錄
  data+=" ${QPM_DIR_ICONS}"
  cp -af ${QPKG_DIR_SHARE:-${QPM_DIR_SHARE}} build.$$/${QPM_DIR_SHARE} || warn_msg 找不到share目錄
  data+=" ${QPM_DIR_SHARE}"

  if [ "${1}" = "arm" ] || [ -z "${1}" ]; then
    cp -af ${QPKG_DIR_ARM:-${QPM_DIR_ARM}} build.$$/${QPM_DIR_ARM} || warn_msg 找不到arm目錄
    data+=" ${QPM_DIR_ARM}"
  fi
  if [ "${1}" = "x86" ] || [ -z "${1}" ]; then
    cp -af ${QPKG_DIR_X86:-${QPM_DIR_X86}} build.$$/${QPM_DIR_X86} || warn_msg 找不到x86目錄
    data+=" ${QPM_DIR_X86}"
  fi

  tar -zcpf "tmp.$$/${QPM_QPKG_DATA}" -C "build.$$" ${data}
  rm -rf build.$$

  exit 0

  mkdir -m 755 -p ${QPM_DIR_BUILD} || err_msg "無法建立編譯目錄"

  if [ -n "${1}" ]; then
    local qpkg_file_name=${QPKG_FILE:-${QPKG_NAME}_${QPM_QPKG_VER}_${1}.qpkg}
  else
    local qpkg_file_name=${QPKG_FILE:-${QPKG_NAME}_${QPM_QPKG_VER}.qpkg}
  fi
  local qpkg_file_path=${QPM_DIR_BUILD}/${qpkg_file_name}
  rm -f "${qpkg_file_path}"
  touch "${qpkg_file_path}" || err_msg "建立package失敗 ${qpkg_file_path}"

  echo "\n#qpm#" >> tmp.$$/${QPM_QPKG_SCRIPT}
  local script_len=$(ls -l tmp.$$/${QPM_QPKG_SCRIPT} | awk '{ print $5 }')
  sed "s/EXTRACT_SCRIPT_LEN=000/EXTRACT_SCRIPT_LEN=${script_len}/" tmp.$$/$QPM_QPKG_SCRIPT > ${qpkg_file_path}

  #dd if=tmp.$$/$QPM_QPKG_DATA of="${QPM_QPKG_BUILD}/${qpkg_file_path}"
  cat tmp.$$/$QPM_QPKG_DATA >> ${qpkg_file_path}

  rm -rf tmp.$$

  ######
  # [MODEL(10)|RESERVED(40])|FW_VERSION(10)|NAME(20)|VERSION(10)|FLAG(10)]
  local enc_space=$(awk 'BEGIN{i=0;while(i++<60)printf " "}')
  local enc_flag="QNAPQPKG  "
  local enc_qpkg_name="${QPKG_NAME}$(awk 'BEGIN{i=0;while(i++<'$(expr 20 - ${#QPKG_NAME})')printf " "}')"
  local enc_qpkg_ver="${QPM_QPKG_VER}$(awk 'BEGIN{i=0;while(i++<'$(expr 10 - ${#QPM_QPKG_VER})')printf " "}')"
  printf "${enc_space}${enc_qpkg_name}${enc_qpkg_ver}${enc_flag}" >> ${qpkg_file_path}
  ######

  [ -z "${avg_no_version}" ] && edit_config "QPKG_VER_BUILD" \"$(expr ${QPKG_VER_BUILD} + 1)\"

  echo "建立${qpkg_file_path}..."

  if [ -x "${QPM_QPKG_CORE}" ]; then
    echo "認證QPKG..."
    ${QPM_QPKG_CORE} --encrypt ${qpkg_file_path}
  else
    echo "傳送至${avg_host}認證QPKG..."
    local nas_qpkg="/share/Public/${qpkg_file_name}"
    scp ${qpkg_file_path} "admin@${avg_host}:${nas_qpkg}"
    ssh admin@${avg_host} "${QPM_QPKG_CORE} --encrypt ${nas_qpkg}" >/dev/null
    scp "admin@${avg_host}:${nas_qpkg}" ${qpkg_file_path}
    ssh admin@${avg_host} "rm -f ${nas_qpkg}" >/dev/null
  fi

  echo "[v] package編譯完成"
}

# Main
main(){
  while  [ $# -gt 0 ]
  do
    case $(echo "$1" | awk -F"=" '{ print $1 }') in
    --help|-h|-\?)  avg_help=TRUE ;;
    --version|-ver|-V) avg_version=TRUE ;;
    --create|-c) avg_qpkg_name="$2"
        [ -n "$avg_qpkg_name" ] || err_msg "--create, -c: 沒有package名稱"
        shift
        ;;
    -n|--nas) avg_host=$(echo "$1" | sed 's/^-[^=]*=//g') ;;
    --push-key) avg_push_key=TRUE ;;
    -nv|--no-version) avg_no_version=TRUE ;;
    -ps|--platform-split) avg_platform_split=TRUE ;;
    -p|--platform) avg_platform=$(echo "$1" | sed 's/^-[^=]*=//g') ;;
    esac
    shift
  done

  [ -n "${avg_version}" ] && version
  [ -n "${avg_help}" ] && help

  if [ -n "$avg_qpkg_name" ]; then
    [ ${#avg_qpkg_name} -gt ${QPM_QPKG_NAME_MAX} ] && err_msg "QPKG的NAME不可以超過${QPM_QPKG_NAME_MAX}個字元"
    create_qpkg "$avg_qpkg_name"
  elif [ -n "$avg_push_key" ]; then
    local id_rsa_client="$HOME/.ssh/id_rsa.pub"
    local id_rsa_server="\$HOME/.ssh/id_rsa_$(/usr/bin/whoami).pub"
    if [ ! -e "${id_rsa_client}" ]; then
      echo "系統將為您建立公開金鑰，請依照步驟按下[ENTER]鍵"
      sleep 3
      ssh-keygen -t rsa
    fi
    while [ -z "$avg_host" ]; do
      printf "請輸入要配置的NAS IP:"
      read avg_host
      echo "連線至${avg_host}..."
      ping -c 1 ${avg_host} &> /dev/null
      if [ $? -ne 0 ]; then
        avg_host=""
        printf "IP有誤，"
      fi
    done
    scp "${id_rsa_client}" "admin@${avg_host}:${id_rsa_server}"
    ssh "admin@${avg_host}" "cat ${id_rsa_server} >> .ssh/authorized_keys"
  else
    if [ ! -x "${QPM_QPKG_CORE}" ] && [ -z "$avg_host" ]; then
      while [ -z "$avg_host" ]; do
        printf "請輸入用來編譯的NAS IP:"
        read avg_host
        echo "檢測${avg_host}..."
        ping -c 1 ${avg_host} &> /dev/null
        if [ $? -ne 0 ]; then
          avg_host=""
          printf "IP有誤，"
        fi
      done
      echo "提醒您，可使用[--nas]參數輸入NAS IP"
    fi
    if [ -n "${avg_platform_split}" ]; then
      build_qpkg "x86" # 2>/dev/null
      build_qpkg "arm" # 2>/dev/null
    elif [ -n "${avg_platform}" ]; then
      if [ "${avg_platform}" != "x86" ] && [ "${avg_platform}" != "arm" ]; then
        err_msg "目前platform只支援x86或arm兩種"
      fi
      build_qpkg "${avg_platform}" # 2>/dev/null
    else
      build_qpkg # 2>/dev/null
    fi
  fi
}

main "$@"
exit 1
#qpm#
 gHR <kwH_ѣp&¯\x/1x2q H'oU-	'ٻ(ĨP8ټRtO[*wMb˥y@J~7R<gέ X_NWp
M'?oi1g_g0јBo=iVdf>X#SnP0(pf(NZiz)P<$EX.XG|BO/Nׯ5:^]3ۚ;هQq>YCt:vYoV@ԌH~FqJҶ;dKKrVI$*+$'?K]2Ӏ$\eyGT[sD]y 9t0!`N5Zʰfo `8&
aPRiwy5ݩ
Z9o_D5>Ek΋^]jp<mQz۔ݔEٌ\KNVyVX/݁EOU75zٺ/*̙N]!wyV׬^	~8Z{|U;^_}.&5fQf,>@8b.:(R*^eB:=E@!X^kLXa*IËd(h]eb0foAJCw r..Ӟ?}cT;]BVu^cGvWYNC#U,e⇟ù3Iݾbl+FvwvgZqj7.Xyd\ӡ;bn߸c.BEѝ+FαVHi^g *Zh6zJsfh]u[]YWyվZI[U
aUveLh/n=weZ j0=_]_WZ]-;ql⢫:F󢫁u½ :uԲhA$3vP35O88bP7s:`XbMJ[8'gi=
ku$e0:Zq޸C`ƯImVQktۗ_9@gsmT!LXuW*K>n1QnC辪_ϋU50./jLmk>1dpgt0PFZ-PoSëw}k6~3>F y§E7hoW)J]w0PR,? CV$J~y~HۏJtRFъqSTɒ%8ۅٜe 3"FUx3%t.^o*fɌѬU'w @P$JWݕ리_LS!T[LJWg =ǊQ a1V2;s9'b}Cly1Ny < }w$?%F4{-k_!Q	" RK(
"LqdQP 糚!$.${a!ef	2!uWӧt"}^A٦*d>vPLXڗFhj6ޗF r@BQ$WL!Dd!+IdQЅ̚.
deѼw+wcg';]~䁍'2c1Q[e˿:{0X
| /!~Ʉ\2O*J	3JCQ3y鵙
f1\yTrRQAj$\ɝyd
gC"bP<x!178#@:,c_>*"Y~ɚ`v-u?;ƌKvVZwHĠp^\q*RuRmIwߣr	M鹮-
<IF%XJb\*Mр(4VNtX%P<kS'=7eTlvjYyte*dɪk.OmϊE6b\?F>)#_/_)C#ǉ95-ƣgjёG']#`DfA%&48[ē=hMƓL_	AsJ12:Ϝ4Wby'PND"j=@C*֜rFߵ>:AiFNyguH(8͜I7o-/c*5Է5.xR۰2mdB۾!=pQ& Z}j	_60eE|'HW V$>JKe*mBÌu2EP3ϫ]]h	Sz %Zvm{?4Kx`([<X.!vRqU;“uve\F-uHT^f?o]NKbnqڨO)B_!GD7h787<$* rL蔑PI)	.ÌcXCr"8rM8$yOȽ\\x}H~3?3G3I~B1[⯩.˰DB;+{$)`U<mI bc,9$CMb :2$YuO81vձ[XWNTfb@$#3H1{w a2ƣIU*#	/ۄJTȢD"Q=:3R}lCClouE&mu7G-śb(*|AbgO?^=ʲhzTwfm8#۠'9=6q9ǀ8HqŠwwqO*{}f\NLƞ3kG?J=Nv
;d
dw #qJys*|uY%2xDu-6dJ~&w[#CY 22@b|OGF-ƍsgH|VȱY٧ ,8P`9&M0SeLv"=C:1I1	1g(w3)ܔ͞E^GqREg#5DgcDJT@޷)Gs0W4vwi(sԒlb0%=%aUvfYxsaĭ.<dE.WSR´p~#%0,d:ěShTލl=J'-i:jD̮6fo7p&t28*(^3Ɛ^q/f9FZ7j]'LO̴1yt1XDQ֕2t>9y`*o4߰KOd<!_i^xDU|DWHϟ"S'ҐpdyT?1k=ΝXj>Y@Bp(6;4}La+%xC2tڄuNE!iQ[@Ks$'/+#,a7`Ƹ@4tY!?d
&;9Ҋ')F$Yt^dbɱbZ[cQJ&uFSsڤdVP&Mh";(-:QGkq8ThJcTPZFϕVmiV?gaϠnqk2ԠFn$͉6dfD-=c9.a2bEcLM1t|yTT!;E *BhnT$v?z{?c7*k1z|E~U+F1r}s+-7R(kĆJBōvFbrY<Q,jar	&/s<TF愛1"x76uܤ{,Kэf"[+h>-ys~3".nHڈő#FG6sc!D#5HZ+r"91Cl	)1Ft1}܍Z;CbycٟӖ?@-	5"E'uȆh~N{FLjk4DxSn@LtScJS{JvL#AiD,;i$pٴm1qh8sUAhq45VRjz@4=WrCrȐtX-FDX=)9P
~mEoS l1'xUaAiK(+\oI
8 ,-YCQX^aI&M[jY&h]SRʬəA5	rCLԟ!II9YѫuͰu\	\W* :g:"ܩƋ}ariqڜbuHuAv(8)lN I`??LWB%) Pn0r JH	I&NAU+
YܞrnPSWyAb($7z/D1Ucm*<ך~MhDٱ6Óa-D@ʐp1_W
b$e G~Lw#ʗGѦ(!G"Fmu"aBBybzvxt[

YA8ϱ*`W% z_"j ~5eʺ6eLK֡
H&k=}u  qMXdfVʎ|!<P4De><OgVB/}z̝Χn
ffgkyl͟oO3;I?Z'TcZV'uW矗3&uO:5v<@vi)Sۇ5BE4㕲g_ lf 9쥖8%=sV(O!>u]Fb	f,zB>:p*&8n5@ҟ)A؁;z0w32N\NG,$(QDZGVo&moV܏]uctKn]IǸ~魪29x2g\܈#t³LOet&BM0R47-'deϴieHUN6DfR7;5ERq&)2dzc+$3UWH
%>⏨tE=)4C;Lm4ph 1
ԯ}6kG}<OtglrG&\NG[@=ӭy'gc(\j@ISZ}S##zcpe:wuLX`lPeEUse 9ă4
fMڤ<G?I&h*?	7#ɬV(A$`HnS|l}>gl}>gl}>gG= x  
#qpm#
 gHR XU!APpK@C@@DZEnR	.	)iTܙޙ;s};Yw~w͂y@_%7	f&/A\Nv0; @\a~<+77l~;y4Kb<~Kp[J9Xi7'oy\b`vF~@$D 
&f %56蒋} ~@O1sgU{90;?9՝$GE ܥ^p43s44\.<eWD    :2^<
G@e`!`ffcnajbuUe7kmuGGmZ6nFD`f> nnn__d.d*VAuo_?o^we˳``z;:  + qKw6]i\{=s-Ww: ^Z'<x9ǘ? %SJ]y< ﮹(150rq ]J&.%/t/%RB/e7	w).%ľK	MxLx .%_:e0 M`_<% $$ ?}Zy0_.^<?]J&a/0`/As#m?'';'7Es9`#lX,4~g;98../ (Io 6VP/v)*H
QQ  e3[+R\Ja7j:V+VWB.-}3)j zCIU
;9DF,0겊wiK\XLETC]"8gjI+e˞./˾4$/+.v~[5h96b4j0{.***W*ܬ@B vV.f˹z|@*&6.T,^WR:φ,0\-!3g`9߲%)f,.#DEea*|5:J_?(;M-\	I59u%e#QevV.>RQW<unt9;za㆕'U?ٓU5=//9wgxaITU\/?[Z.N\Ύff1\}2b%&yLI5Q4_EU|3+E(&/q>.l,X]4~o/7~1PS8ZZho6 E1^?HTB.W=qd$U%@#+)V\'#svvTQV*"/犎nIdbftt10w$/̹;|vL-Γ9G_KL4|/2-\MM\Y ? ߏq1V?/{98`?Y@!` ~e ףЅlW ,8 X Lr0`#a?l0~0{no}À㿘y /?0`?.ƂiK?x	c=,L[k89ٹ ܐ<lid?:gQ.mL 럟忄c/t=/=7E >ܥ>[\ & ȃԥx؈'0`o6^[0`/^r60}2F۬NZܿ~@?B
1߶j Odhjdjbcfz~3ZZ0׌p+5"de+C#ܟZΦ?N[Ã0x?h*{O1AWy bU0',3V	y.T%&"<j6v(o@%7?t0Q,xObMOWx?sʊCVFobi  {OVBTe{ȊǖoCm..[C*<1h%>)>5y^+f"Ko`=R{5a6X[A;Èad;<f:nˇ{R3[|+<J_0Azؾ`qǛڕo[&MD\ieO;<Bn1xowe>B/%mp.'M(i;DVW#Ә/&p+0snbbiyG^Jk}%JU+'{RI;ʈd@zDFHԱ=A2kz/G'yRl(`H,nlU`\=s&9'xꌜԇ8CpŭH9D 6!l}aJ53.7<* L`+2r<z}7԰V:?,[UW-ͤھDJͼV\ 
.o>.F<⚘%	"iExA/ʬT_6>o5GŅ\(˫ɤ?&Ռyz$==XTMc<c|fh 1͌׫S6gZͫ	1#	C	wS}@!;PRSnơFݓ_)	Y.vLy43%12&?ZySB`riͬZ2OoCU"j>&^MkB@E!ǳjtDT	Fy*E@n[c'3÷Mҍ^5vbdVͪ'w^mFynU$?܍u)%?Ӫv={`pۉ)C^v>
Chcĵ.(pRŁO<Wφi3;j$;6ZH6/H$J#MfnH#E[U&J>b$!)Ƅy<M>[#5_P$Wx͘On;-gQEvbS6A40I2ZNAҎ~bg8]W=IRSԔ@Tilj\JՈ&C	MJjG67<BM=?2tU.(Tjk879psXȐ:Bx#ǓaAؒQYDIm>m9bɳV' &p]%5V"PB(j|%)XM6i,yeٞ՝{FzWpBX9J,L1dQrs JVjWW
 rR*c>ܼF&r['KŌF`k&1T.(&t%JyQG@P_軒YcsH";4`PI̲r3bHiUQm- @+π.q6'WA
qp{tF%MKn{~uAL|Opb/N6[,jKۜ\ܘEi;EPG5ڡq	!Yg >\(dܚG'R72pna%'U^@Ûc.BM-RRQ T!f/	>Na7d~EP"OfHȴЈF"pM,].$٤Lk>ԧ}YSwz^clG'2 `"<{,W4ADH&7N"x.`DE| N87Z	H@C"Cǎ	-e6_%HfK;JY[y݃Twsovz9 	ň	uYI嗧:>GhE+wi /s2???_c))VK+]caҵ_!VD Q/DE T(O-yC)W|&)݅Xq|iI!|j.\e*< ,QEwDzߑ }DÂ-K'yzu dq<B2urDhoTxG6F<;XGTЏdF-?YG8U@T"|dH;>ʔܪۇHŦDx?s30={6PϽh>{1W s^y)m?S'IXyc˥kfq[[H]傓Yw܅G׏QZ(L{puu<Zp{-zG5DLް.1`+NZ8|;vփ,0}mr*Qx+PNבK|PC#r\-Q͑$0niya2xP{ jk=hXzu'Nan22걪umr''p'ġewmCb|$Ϊ:Z\U6+ k+G-^^Pj
GfQz--vqw-y^h.ΜH!*šsWsA[R3҅yzڈ]2MNgX+`+.]zLCD7he-..nfz?V@{K!}OӃpǋO?Kagpy5qL9t OW|<F.67(˼'ep݈|G\m`'ZԒ> 1+Cr`hv{hGYqPjǣ5>XL/u*^43|Lo{Dڒ
MAOM15P2Yѩ޵0r{6gE2m	.KbswVfoڽw4?յyo	cnJEI.MWb*,}<_l{-M,F}g?yPu}^Pϥ|`louKp}yjev^CnAz%w[R?uӰSlːfbePȤyrԋY؈w$}6峯>~p
I 3@3AcKĹK1 w	vQQWo|w/$qZNU%yjs4gUص Rmak6?sד~zC!Tdknv[ Pm*JO$ⵉM"|GO[R3*bSEuIvUFY|ˎjtӭgǙWϢX>#F˹Ü4tk'îT<"Vn1|wFqBe850#]cDɋ"8B+v5u	عG s_z%fL?ыxwηfeqùOiޗG<X9~x'Mz{gA>(UP6(Hݯ7Wd.q3D'ם%IK%2_Wx*9sIbGFz:3rjtR[Xf2kP,j '4"
	.zX؉UT=''R5WܶG.4PE,p}mEYjWiSc UU<,+u|e,*x(Pz5|TD<	^NBd@!o"yFdoS5eT	gi4~iEme>1+o.&cvoKwZ5-kTAXčNQ2bin&|&гX% d͏hwސr3ܛU/ P@Τ4w+z${<:j4q9[US<xENGmM21Q +_mθKzq<$,8;ݐD#*Rztb#ou7ў]#PI	,;)A'`kzB?VmKIDAE	"-y(VٳVˇ>Zꄼḯm4Snw4qI9PW|3LߥѶF־H89sx{h)X4*`LΦy}}(ZVH"'JӨjɽWh̆8$Dҍ/b'T)+q"vΚn^4J*Ji*~߈g5\`vXx$ȩͶ6$Un׳	ݨ2lFlMm}!>alA߭#LE,A<[X;cTq܂zew#NEzrH.=L%H01lB9Q&c`[
q)7D{gï+_8e  ntov7o.N<)gGfOhmp-!xh-	~dHϪ=}bvu<9'[eKS晗*vqiUpkd9lY0>5riK+?oU<  8P#@і)'y3O)=FT~FGM]jZ ]Cr|E& ^V#-_tւ{|BCB۲d=R@Fg"/У6<2<p[ڻM((Ze4n'Ν\<CW;_NlHftIYؗcfeg koBD^?(dN'}0ݶ:UU'?YQmHTF̏ _L$)&ԤHڬglr 㣁0L07|v`3OKricezle	cpZi4}	]<.Iˑ	6~S?͒3C#c.>0wWłm3|oIXSKBa >R]5iKdy9d&{2pWc?-u񿏗^mb&fV\(esDUkc[yǁބb6UsIH3S޺yCLwQ-{:h>j0b0nN3xBkCݣXtv_@q+4%'ҪNA7:NtA%@M3Q^J($b*ȹ8 84jD\|wLX^~X7巶z#]V,{L7*8<5FK%tx		2ވ-f+!
mMU
FK5FEOLt`qq~c[ʱW.ӱl͉kC^TPMdwk)8B6k̈UV-b Q!ɥ]*ճ 1c"koeT"uv"90UR\BvqiUrⅾF+zkTJ~ηc~+X6=qIU?1أ9a|ʍ0}[eH1R+QzK<
T\6RKŽX[ѝ\RwAzzP{蔛7qHo0%zMCC!'QOp24_#>ڼ]{QKQ\Lj<NN9Gj	bz"-3T7u6;bCL%c98Ͳ
rur*SЍ); ![
9rCV֎Xs]G09G&{6.Q2rݩhC^c8mkC=-793EҊdӯ:95zmu{	\/=TTm?p+nN5׼z4j4iH,jZWԒr
n|wwP
&|
< O#rFOވI%'H#1=X*훈VK^o?bL:ЕEDѢޣIͻ55BF@}hi!.g@K.]MT7ٓɮ"敥L^|c|q.LyUsV٫m<;z҄Ý,BxɌ[Cfֻ]+ˇ"tQGzp&J&]Uz5m#<rfu0@8=|.q;n6_2)n5JiEh(NBޫ؄@o)@m@#FK$if)]w	:
-:6
E=&sRP
qu{HGڞ+4̞gkypA[6r2R+K%8ĩ-y@IuH6uUZ$( Qo&ND5(݄Isb<vY!fjL]0
A Q4>*u?K	: 2[Myo;9#cEݤ]GoCX2kO3#0}>G9c2_՚EKJQ$6d?!rd#މ>@W 6g]wNovB_woAK☕_wC^D֚oܰ#r̔
FؕO;`"4;IU6T S&md$&{=oM$&|E~|oJ;cg{EAtLRBͬX\ Qm%V1a+M U{/OW("		
p&ͽ&ŸU,FÑ}^
ʡM=v߈{݀gkb^W:*KL{"+@zLмȧǸTIh+K֓5M-"&禟ꚤ%08M;y|L3T䤯GRA͟h\cbެg(VgT}5>iԪ:6ī\!+7n7vеF=co)]xV. H;">!;ӰP}6Ǿ.!t"e [%:G<>%pvVSD$1jue??sbL>(cHy?1	B<;1WuT':a  Ev?Ea[-,}3('z%H}Dg/NA	{t2<!!msE#,B^r-*!BАpBiAvV0MA4z,/<ԠjɗR[DQe?4V2N,3'&!؛?ϿuVۻuqњ׽=hY-ЪA>ەY>l|^d̝P<U!iʅ Bm̓_0IKd2mm׷3/XggKvϔuIɀ[MKU> MMo4v}s+ޯ#f~z=̦h
#Q%zķ\#pp$dJs'91%,ڻv>\@`TTs
e)(~;֨dZ6hB"չ'2֥myϞau+ae]ͩ6m!!/)iZMXH[j`@C1)ЫtN-.,iAhI!S; F#~)u>(<FOcɬ}0-CWԑ!PQm4!`WZ;={wnƬnjtpx!q2 z1b
Ȼ̌]<o1R{_^#:?Fs+ǈdy(gk'HCNaе 'LLqD&EWolKvFo	~v@s(x\WNy`8. BLUl6V#y.q]d ][+vOE@I[9rðuj5TR鬍cIO1~'g;nӇjdU8ԭ1;[Rs
Сjk'BbU~p%;\v\geaWY`sڃ;#c2i54)f,8CqQjʏf(D-;@%wǬ/0A'P=ExOH/Fm:$ZUm]@&6yTMV/͑(
@/w.~QӇ8E.{զ/F'3o%j96ޒ܌@pB!]lj3&$щn#wv:a/DURaI]HoH1Њu븷'e'zj+Zv&`sԇ:ZʴdA]K9/9,Me
S]a,4xW\v؊118 z}Lqf[ϑUjlb3$y߬]1wJoӋg0O8'f Kѽ|.х ˫B#cO9R"_E&F=!LpbPqIY4 
zpbB>́Hџ}G\%ONR͘q؞XYG,6W/֙F}D|Kd;lQ@dJr{W'Hon$ntk(um@`Pŵ6'5?Td|=vyPN!qiK$Wנ  R$$)p4<\"_PgۣhE`Dej*Y3SXC)a_I:]kg2blG%俽ԪlfQ(0]_2{YCAX½91SgjB"7-YM4nW&?21LMW6Dlx{WSU`QZZ!'4Jݵh%,L5;[= bIӒz'JRb=G%diQN]'%,y#khs5?c^8u6%Zi4sdsD˴<@c<[#U92}YtPeXSURVI<3
-ւދNoXx9mov0;6G.f_1и.
+9@i',ʽ0U #itFW0;/~(G&dФ	=;؏1ɧ0".߃K%MQ  N4V3jl8$[;5a]tO~ɝ\fY,D?Vϟ!C_PijG!9h|zzpF8nA}KaYk17f;l#R%\6vd
e8kbrAjg2: ŕ">O%	V8y^u%uu dDE5\jypβJ:pEAB$ʇТA]>/$QO'BȂ|UD#׻{hccliw-;n?zjބJT0;\Yv嚽Mm!m&G:~Xph*,:I,ElGk:|ڣpIcZ`	iCwU-,AN*Yj؁!dzuɯarhR 6VE|e1ֵٛ [3c5Ku[b6޾(yK'BS 8-*/ׅꡔq!NYb	5 mY/["SG[٫>v0f
Q.vDf[Xy̰QVX?U>.40kY~sxAOU)/=+	v	)0=IfLveqH"s`2̌n8聑WfJbY ^M6i#yQvL+>>e*X1eqHJ!9ǆjê͗+4O*f<K-]ȶ^`Vݽ91Ig%vR7iޚUaCRHFX*6L(1^F~9GWbu3֌^ mNs)rO8m]R\5p*9;4KNÍ?Q0eJ,}mOSlOJ D;U>5 u0B&)(\5^f3&ǡ+AB3Mw4/
Jzp
kc.,zqmhBjYV}d8iZbюNeVR7J+H.>j&dan1:4),"c+cP-=v7k*L|w)־z8$jvl v0:CL1 5XQ(hl9hq-Bc+2MZ#f Sj`:h]5,qmDy0SelPQe>5#{`w?ļ<.9uz}ZU9\߽\^5pq@)Ƴ񉄫V6/xQ:Q֑Hmd&p^Lx{ݓ"``hjONHW5喧+TLKu./Iǡh:r$<4xv;7jcYprJN2+x|>;6v°nbO;[+.	#}S{J oA4bxP7B3	~B*Td ~#TDULjlq@u&Yx!v͕l(%c5-{%PC8i1eZxWDGұƣzPGnZ`Kq<&H<+&rC}B̜WU뵒UϜpvsk)XRj6jpXDBʦq˽љyWDȺ<J6#^Bf.)׿Zlt$`\';}'xcEU]icyB^ QV^}:ԁIH)
\\3xKpi~
)V 	^2j{y7LЋI3+лRA	')H1\}M,`2|7/;I/O\ӚRAv]#΂δUm <ę@4ޘq@B%n;i5H*Ōf<DJW)g1g%Ol<~Aӯ.d赺a]ӃiC9R]2s m=]06ns6]݃;Tu3A?BH@mi^szh@eeDm]'W{w'&CCAk%N$L;J|2OH=e|XmȽ^I3u'C#N9`̙뙴%EDl` 1tUzqЈNÓ(5tj=d4e#6!2P؃VhQN+XV퓽(35$-˃zXli;XR&AБm4@<ށ6j<FG؍ܧ}>^fRYq-6H9uSF6|żfJƖ6'D""gFBzooi&g :-}qԳ!ޙYxSR:BFԩSyn%
ƭM7("	rc--}6ǈ2^&D ?|{dUr/w|ٍeԑ9cJ|OvEj_K`0`x   